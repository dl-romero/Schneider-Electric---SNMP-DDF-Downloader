<?xml version="1.0"?>
<!--
	APC PDU power related sensors.
	Used for totalpower, apparent power, etc.
	for single phase and three phase PDUs
	-->
<APC_DDF
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="http://localhost/ddf_schema/apc_ddf_1_6.xsd"
	ddfid="apcpower"
	ddfname="APC PDU"
	ddfversion="52"
	canremove="yes">
	<schemaVersion>1.6</schemaVersion>
	<!-- Section is for new devices supporting the xPDUTotalOutput OIDs -->
	<device deviceid="totalpoweroids">
		<oidMustExist ruleid="totalpoweroid" oid=".1.3.6.1.4.1.318.1.1.15.3.4.3.0"/>
		<numSensor ruleid="totalpower">
			<type>powerW/outputpower/total</type>
			<sensorId>OUTPUT_POWER_TOTAL</sensorId>
			<value>
				<mult>
					<op>
						<getOid>.1.3.6.1.4.1.318.1.1.15.3.4.3.0</getOid>
					</op>
					<op>100</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<valueInc>100</valueInc>
			<label>Total Power Output</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>

		<numSensor ruleid="totalapppower">
			<type>powerVA/apparentpower/total</type>
			<sensorId>OUTPUT_APPARENT_POWER_TOTAL</sensorId>
			<value>
				<mult>
					<op>
						<getOid>.1.3.6.1.4.1.318.1.1.15.3.4.4.0</getOid>
					</op>
					<op>100</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<valueInc>100</valueInc>
			<label>Total Apparent Power Output</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>

		<numSensor ruleid="totalpowerfactor">
			<type>num/powerfactor/total</type>
			<sensorId>OUTPUT_POWER_FACTOR_TOTAL</sensorId>
			<value>
				<mult>
					<op>
						<getOid>.1.3.6.1.4.1.318.1.1.15.3.4.5.0</getOid>
					</op>
					<op>0.01</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<label>Total Power Factor</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>

		<numSensor ruleid="neutralcurrent">
			<type>amperage/output/total</type>
			<sensorId>NEUTRAL_CURRENT</sensorId>
			<value>
				<mult>
					<op>
						<getOid>.1.3.6.1.4.1.318.1.1.15.3.4.2.0</getOid>
					</op>
					<op>0.1</op>
				</mult>
			</value>
			<valueInc>0.1</valueInc>
			<label>Output Current - Neutral</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>

		<numSensor ruleid="outputfrequency">
			<type>frequency/outputfrequency</type>
			<sensorId>OUTPUT_FREQ</sensorId>
			<value>
				<mult>
					<op>
						<getOid>.1.3.6.1.4.1.318.1.1.15.3.4.1.0</getOid>
					</op>
					<op>0.1</op>
				</mult>
			</value>
			<valueInc>0.1</valueInc>
			<label>Output Frequency</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
	</device>

	<!-- Section is for per-phase main input xPDU OIDs -->
	<device deviceid="maininputperphasepoweroids">
		<oidMustExist ruleid="totalpoweroid" oid=".1.3.6.1.4.1.318.1.1.15.3.1.3.0"/>

		<numSensor ruleid="l2lvoltage" index=".1.3.6.1.4.1.318.1.1.15.3.1.4.1.1">
			<rowTest>
				<mapValue mapid="skip_null_sensor">
					<getRowOid>.1.3.6.1.4.1.318.1.1.15.3.1.4.1.2</getRowOid>
				</mapValue>
			</rowTest>
			<type>voltage/outputl2l/phase</type>
			<sensorId>MAIN_INPUT_VOLTAGE_L2L_<rowIndex/>
			</sensorId>
			<value>
				<mult>
					<op>
						<getRowOid>.1.3.6.1.4.1.318.1.1.15.3.1.4.1.2</getRowOid>
					</op>
					<op>0.1</op>
				</mult>
			</value>
			<label>Main Input Voltage (line-line) - Phase<space/>
				<rowIndex/>
			</label>
			<sensorSet>Input - Phase<space/>
				<rowIndex/>
			</sensorSet>
		</numSensor>

		<numSensor ruleid="l2nvoltage" index=".1.3.6.1.4.1.318.1.1.15.3.1.4.1.1">
			<rowTest>
				<mapValue mapid="skip_null_sensor">
					<getRowOid>.1.3.6.1.4.1.318.1.1.15.3.1.4.1.3</getRowOid>
				</mapValue>
			</rowTest>
			<type>voltage/outputl2n/phase</type>
			<sensorId>MAIN_INPUT_VOLTAGE_L2N_<rowIndex/>
			</sensorId>
			<value>
				<mult>
					<op>
						<getRowOid>.1.3.6.1.4.1.318.1.1.15.3.1.4.1.3</getRowOid>
					</op>
					<op>0.1</op>
				</mult>
			</value>
			<label>Main Input Voltage (line-neutral) - Phase<space/>
				<rowIndex/>
			</label>
			<sensorSet>Input - Phase<space/>
				<rowIndex/>
			</sensorSet>
		</numSensor>

		<!--Skip sensors returning -1 -->
		<valueMap ruleid="skip_null_sensor">
			<valueIn>-1</valueIn>
			<valueOut>[false]</valueOut>
			<!-- include the rest -->
			<valueIn>*</valueIn>
			<valueOut>[true]</valueOut>
		</valueMap>
	</device>

	<!-- Section is for per-phase bypass input xPDU OIDs -->
	<device deviceid="bypassinputperphasepoweroids">

		<oidMustExist ruleid="bypinputvoltexistsoid" oid=".1.3.6.1.4.1.318.1.1.15.3.2.4.1.3.1"/>
		<oidMustMatch ruleid="bypassinputexists" oid=".1.3.6.1.4.1.318.1.1.15.2.11.0">
			<valueList>
				<value>2</value>
			</valueList>
		</oidMustMatch>

		<numSensor ruleid="l2lvoltage" index=".1.3.6.1.4.1.318.1.1.15.3.2.4.1.1">
			<type>voltage/outputl2l/phase</type>
			<sensorId>BYPASS_INPUT_VOLTAGE_L2L_<rowIndex/>
			</sensorId>
			<value>
				<mult>
					<op>
						<getRowOid>.1.3.6.1.4.1.318.1.1.15.3.2.4.1.2</getRowOid>
					</op>
					<op>0.1</op>
				</mult>
			</value>
			<label>Bypass Input Voltage (line-line) - Phase<space/>
				<rowIndex/>
			</label>
			<sensorSet>Input - Phase<space/>
				<rowIndex/>
			</sensorSet>
		</numSensor>

		<numSensor ruleid="l2nvoltage" index=".1.3.6.1.4.1.318.1.1.15.3.2.4.1.1">
			<type>voltage/outputl2n/phase</type>
			<sensorId>BYPASS_INPUT_VOLTAGE_L2N_<rowIndex/>
			</sensorId>
			<value>
				<mult>
					<op>
						<getRowOid>.1.3.6.1.4.1.318.1.1.15.3.2.4.1.3</getRowOid>
					</op>
					<op>0.1</op>
				</mult>
			</value>
			<label>Bypass Input Voltage (line-neutral) - Phase<space/>
				<rowIndex/>
			</label>
			<sensorSet>Input - Phase<space/>
				<rowIndex/>
			</sensorSet>
		</numSensor>
	</device>

	<!-- Section is for per-phase ups input xPDU OIDs -->
	<device deviceid="upsinputperphasepoweroids">
		<oidMustExist ruleid="upsinputtableoid" oid=".1.3.6.1.4.1.318.1.1.15.3.3.1.0"/>
		<oidMustMatch ruleid="isxctypeb" oid=".1.3.6.1.4.1.318.1.1.15.2.14.0">
			<valueList>
				<value>1</value>
			</valueList>
		</oidMustMatch>

		<stateSensor ruleid="upsvnotpresentpresent" index=".1.3.6.1.4.1.318.1.1.15.3.3.2.1.1">
			<type>state/outputl2n/phase</type>
			<sensorId>UPS_INPUT_VOLTAGE_L2N_<rowIndex/>
			</sensorId>
			<value>
				<mapValue mapid="notpresentpresentmap">
					<getRowOid>.1.3.6.1.4.1.318.1.1.15.3.3.2.1.2</getRowOid>
				</mapValue>
			</value>
			<label>UPS Input Voltage (line-neutral) - Phase<space/>
				<rowIndex/>
			</label>
			<enum>notpresentpresent</enum>
			<sensorSet>Input - Phase<space/>
				<rowIndex/>
			</sensorSet>
		</stateSensor>

		<valueMap ruleid="notpresentpresentmap">
			<valueIn>1</valueIn>
			<valueOut>1</valueOut>
			<valueIn>2</valueIn>
			<valueOut>2</valueOut>
			<valueIn>*</valueIn>
			<valueOut>0</valueOut>
		</valueMap>

		<enumMap ruleid="notpresentpresent">
			<label>Unknown</label>
			<label>Not Present</label>
			<label>Present</label>
		</enumMap>
	</device>

	<!-- Section is for per-phase output xPDU OIDs -->
	<device deviceid="perphasepoweroids">
		<oidMustExist ruleid="totalpoweroid" oid=".1.3.6.1.4.1.318.1.1.15.3.4.13.0"/>

		<numSensor ruleid="l2lvoltage" index=".1.3.6.1.4.1.318.1.1.15.3.4.14.1.1">
			<type>voltage/outputl2l/phase</type>
			<sensorId>OUTPUT_VOLTAGE_L2L_<rowIndex/>
			</sensorId>
			<value>
				<mult>
					<op>
						<getRowOid>.1.3.6.1.4.1.318.1.1.15.3.4.14.1.2</getRowOid>
					</op>
					<op>0.1</op>
				</mult>
			</value>
			<label>Output Voltage (line-line) - Phase<space/>
				<rowIndex/>
			</label>
			<sensorSet>Output - Phase<space/>
				<rowIndex/>
			</sensorSet>
		</numSensor>

		<numSensor ruleid="l2nvoltage" index=".1.3.6.1.4.1.318.1.1.15.3.4.14.1.1">
			<type>voltage/outputl2n/phase</type>
			<sensorId>OUTPUT_VOLTAGE_L2N_<rowIndex/>
			</sensorId>
			<value>
				<mult>
					<op>
						<getRowOid>.1.3.6.1.4.1.318.1.1.15.3.4.14.1.3</getRowOid>
					</op>
					<op>0.1</op>
				</mult>
			</value>
			<label>Output Voltage (line-neutral) - Phase<space/>
				<rowIndex/>
			</label>
			<sensorSet>Output - Phase<space/>
				<rowIndex/>
			</sensorSet>
		</numSensor>

		<numSensor ruleid="current" index=".1.3.6.1.4.1.318.1.1.15.3.4.14.1.1">
			<type>amperage/output/phase</type>
			<sensorId>OUTPUT_CURRENT_<rowIndex/>
			</sensorId>
			<value>
				<mult>
					<op>
						<getRowOid>.1.3.6.1.4.1.318.1.1.15.3.4.14.1.4</getRowOid>
					</op>
					<op>0.1</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<label>Output Current - Phase<space/>
				<rowIndex/>
			</label>
			<sensorSet>Output - Phase<space/>
				<rowIndex/>
			</sensorSet>
		</numSensor>

		<numSensor ruleid="power" index=".1.3.6.1.4.1.318.1.1.15.3.4.14.1.1">
			<type>powerW/outputpower/phase</type>
			<sensorId>OUTPUT_POWER_<rowIndex/>
			</sensorId>
			<value>
				<mult>
					<op>
						<getRowOid>.1.3.6.1.4.1.318.1.1.15.3.4.14.1.5</getRowOid>
					</op>
					<op>100</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<valueInc>100</valueInc>			
			<label>Power Output - Phase<space/>
				<rowIndex/>
			</label>
			<sensorSet>Output - Phase<space/>
				<rowIndex/>
			</sensorSet>
		</numSensor>

		<numSensor ruleid="apppower" index=".1.3.6.1.4.1.318.1.1.15.3.4.14.1.1">
			<type>powerVA/apparentpower/phase</type>
			<sensorId>OUTPUT_APPARENT_POWER_<rowIndex/>
			</sensorId>
			<value>
				<mult>
					<op>
						<getRowOid>.1.3.6.1.4.1.318.1.1.15.3.4.14.1.6</getRowOid>
					</op>
					<op>100</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<valueInc>100</valueInc>
			<label>Apparent Power Output - Phase<space/>
				<rowIndex/>
			</label>
			<sensorSet>Output - Phase<space/>
				<rowIndex/>
			</sensorSet>
		</numSensor>

		<numSensor ruleid="powerfactor" index=".1.3.6.1.4.1.318.1.1.15.3.4.14.1.1">
			<type>num/powerfactor/phase</type>
			<sensorId>OUTPUT_POWER_FACTOR_<rowIndex/>
			</sensorId>
			<value>
				<mult>
					<op>
						<getRowOid>.1.3.6.1.4.1.318.1.1.15.3.4.14.1.7</getRowOid>
					</op>
					<op>0.01</op>
				</mult>
			</value>
			<minValue>0</minValue>
			<maxValue>1.0</maxValue>
			<label>Power Factor - Phase<space/>
				<rowIndex/>
			</label>
			<sensorSet>Output - Phase<space/>
				<rowIndex/>
			</sensorSet>
		</numSensor>
	</device>

	<!-- Section is for XPDU System Breaker Main Input Breaker Position-->
	<device deviceid="xpdusysbreakermainbreakerpost">

		<oidMustExist ruleid="xpdusysbreakersexistoid" oid=".1.3.6.1.4.1.318.1.1.15.4.1.1.0"/>

		<stateSensor ruleid="xpdusystembreakermaininput">
			<type>state/xpdusystembreakerpositionmaininput</type>
			<sensorId>SYSTEM_BREAKER_POSITION_MAIN_INPUT</sensorId>
			<value>
				<mapValue mapid="breakerpositionmap">
					<getOid>.1.3.6.1.4.1.318.1.1.15.4.1.2.1.3.1</getOid>
				</mapValue>
			</value>
			<label>
				<getOid>.1.3.6.1.4.1.318.1.1.15.4.1.2.1.2.1</getOid>
			</label>
			<enum>openclosed</enum>
			<sensorSet>System Breaker Position</sensorSet>
		</stateSensor>

		<valueMap ruleid="breakerpositionmap">
			<valueIn>1</valueIn>
			<valueOut>0</valueOut>
			<valueIn>2</valueIn>
			<valueOut>1</valueOut>
			<valueIn>*</valueIn>
			<valueOut>2</valueOut>
		</valueMap>

		<enumMap ruleid="openclosed">
			<label>Open</label>
			<label>Closed</label>
			<label>Unknown</label>
		</enumMap>

	</device>

	<!-- Section is for XPDU System Breaker Q1,Q2,and Q3 Breaker Positions-->
	<device deviceid="xpdusysbreakerqbreakerpost">

		<oidMustExist ruleid="xpdusysbreakersexistoid" oid=".1.3.6.1.4.1.318.1.1.15.4.1.1.0"/>
		<oidMustMatch ruleid="xpdutype" oid=".1.3.6.1.4.1.318.1.1.15.2.14.0">
			<valueList>
				<value>1</value>
			</valueList>
		</oidMustMatch>

		<stateSensor ruleid="xpdusystembreakerq1input">
			<type>state/xpdusystembreakerpositionq1input</type>
			<sensorId>SYSTEM_BREAKER_POSITION_Q1_INPUT</sensorId>
			<value>
				<mapValue mapid="breakerpositionmap">
					<getOid>.1.3.6.1.4.1.318.1.1.15.4.1.2.1.3.2</getOid>
				</mapValue>
			</value>
			<label>
				<getOid>.1.3.6.1.4.1.318.1.1.15.4.1.2.1.2.2</getOid>
			</label>
			<enum>openclosed</enum>
			<sensorSet>System Breaker Position</sensorSet>
		</stateSensor>

		<stateSensor ruleid="xpdusystembreakerq2output">
			<type>state/xpdusystembreakerpositionq2output</type>
			<sensorId>SYSTEM_BREAKER_POSITION_Q2_OUTPUT</sensorId>
			<value>
				<mapValue mapid="breakerpositionmap">
					<getOid>.1.3.6.1.4.1.318.1.1.15.4.1.2.1.3.3</getOid>
				</mapValue>
			</value>
			<label>
				<getOid>.1.3.6.1.4.1.318.1.1.15.4.1.2.1.2.3</getOid>
			</label>
			<enum>openclosed</enum>
			<sensorSet>System Breaker Position</sensorSet>
		</stateSensor>

		<stateSensor ruleid="xpdusystembreakerq3bypass">
			<type>state/xpdusystembreakerpositionq3bypass</type>
			<sensorId>SYSTEM_BREAKER_POSITION_Q3_BYPASS</sensorId>
			<value>
				<mapValue mapid="breakerpositionmap">
					<getOid>.1.3.6.1.4.1.318.1.1.15.4.1.2.1.3.4</getOid>
				</mapValue>
			</value>
			<label>
				<getOid>.1.3.6.1.4.1.318.1.1.15.4.1.2.1.2.4</getOid>
			</label>
			<enum>openclosed</enum>
			<sensorSet>System Breaker Position</sensorSet>
		</stateSensor>

		<valueMap ruleid="breakerpositionmap">
			<valueIn>1</valueIn>
			<valueOut>0</valueOut>
			<valueIn>2</valueIn>
			<valueOut>1</valueOut>
			<valueIn>*</valueIn>
			<valueOut>2</valueOut>
		</valueMap>

		<enumMap ruleid="openclosed">
			<label>Open</label>
			<label>Closed</label>
			<label>Unknown</label>
		</enumMap>

	</device>

	<!-- Section is for XPDU System Breaker Bypass Input Breaker Positions-->
	<device deviceid="xpdusysbreakerbypinputbreakerpost">

		<oidMustExist ruleid="xpdusysbreakersexistoid" oid=".1.3.6.1.4.1.318.1.1.15.4.1.1.0"/>
		<oidMustMatch ruleid="xpdubypassinput" oid=".1.3.6.1.4.1.318.1.1.15.2.11.0">
			<valueList>
				<value>2</value>
			</valueList>
		</oidMustMatch>

		<stateSensor ruleid="xpdusystembreakerbypassinput">
			<type>state/xpdusystembreakerpositionbypassinput</type>
			<sensorId>SYSTEM_BREAKER_POSITION_BYPASS_INPUT</sensorId>
			<value>
				<mapValue mapid="breakerpositionmap">
					<getOid>.1.3.6.1.4.1.318.1.1.15.4.1.2.1.3.5</getOid>
				</mapValue>
			</value>
			<label>
				<getOid>.1.3.6.1.4.1.318.1.1.15.4.1.2.1.2.5</getOid>
			</label>
			<enum>openclosed</enum>
			<sensorSet>System Breaker Position</sensorSet>
		</stateSensor>

		<valueMap ruleid="breakerpositionmap">
			<valueIn>1</valueIn>
			<valueOut>0</valueOut>
			<valueIn>2</valueIn>
			<valueOut>1</valueOut>
			<valueIn>*</valueIn>
			<valueOut>2</valueOut>
		</valueMap>

		<enumMap ruleid="openclosed">
			<label>Open</label>
			<label>Closed</label>
			<label>Unknown</label>
		</enumMap>

	</device>

	<!-- Section is for XPDU System Breaker Cross Tie Breaker Positions-->
	<device deviceid="xpdusysbreakercrosstiebreakerpost">

		<oidMustExist ruleid="xpdusysbreakersexistoid" oid=".1.3.6.1.4.1.318.1.1.15.4.1.1.0"/>
		<oidMustMatch ruleid="xpducrosstie" oid=".1.3.6.1.4.1.318.1.1.15.2.12.0">
			<valueList>
				<value>2</value>
			</valueList>
		</oidMustMatch>

		<stateSensor ruleid="xpdusystembreakercrosstie">
			<type>state/xpdusystembreakerpositioncrosstie</type>
			<sensorId>SYSTEM_BREAKER_POSITION_CROSS_TIE</sensorId>
			<value>
				<mapValue mapid="breakerpositionmap">
					<getOid>.1.3.6.1.4.1.318.1.1.15.4.1.2.1.3.6</getOid>
				</mapValue>
			</value>
			<label>
				<getOid>.1.3.6.1.4.1.318.1.1.15.4.1.2.1.2.6</getOid>
			</label>
			<enum>openclosed</enum>
			<sensorSet>System Breaker Position</sensorSet>
		</stateSensor>

		<valueMap ruleid="breakerpositionmap">
			<valueIn>1</valueIn>
			<valueOut>0</valueOut>
			<valueIn>2</valueIn>
			<valueOut>1</valueOut>
			<valueIn>*</valueIn>
			<valueOut>2</valueOut>
		</valueMap>

		<enumMap ruleid="openclosed">
			<label>Open</label>
			<label>Closed</label>
			<label>Unknown</label>
		</enumMap>

	</device>

	<!-- Section is for XPDU System Breaker Load Panel Breaker Positions-->
	<device deviceid="xpdusysbreakerloadpanelbreakerpost">

		<oidMustExist ruleid="xpdusysbreakersexistoid" oid=".1.3.6.1.4.1.318.1.1.15.4.1.1.0"/>
		<oidMustMatch ruleid="xpdutypeC" oid=".1.3.6.1.4.1.318.1.1.15.2.14.0">
			<valueList>
				<value>2</value>
			</valueList>
		</oidMustMatch>

		<stateSensor ruleid="xpdusystembreakerloadpanel">
			<type>state/xpdusystembreakerpositionloadpanel</type>
			<sensorId>SYSTEM_BREAKER_POSITION_LOAD_PANEL</sensorId>
			<value>
				<mapValue mapid="breakerpositionmap">
					<getOid>.1.3.6.1.4.1.318.1.1.15.4.1.2.1.3.4</getOid>
				</mapValue>
			</value>
			<label>Load Panel</label>
			<enum>openclosed</enum>
			<sensorSet>System Breaker Position</sensorSet>
		</stateSensor>

		<valueMap ruleid="breakerpositionmap">
			<valueIn>1</valueIn>
			<valueOut>0</valueOut>
			<valueIn>2</valueIn>
			<valueOut>1</valueOut>
			<valueIn>*</valueIn>
			<valueOut>2</valueOut>
		</valueMap>

		<enumMap ruleid="openclosed">
			<label>Open</label>
			<label>Closed</label>
			<label>Unknown</label>
		</enumMap>
	</device>

	<!-- Section is for XPDU Input Contacts and Relay Outputs-->
	<device deviceid="xpduinputoutputoids">

		<oidMustExist ruleid="totalpoweroid" oid=".1.3.6.1.4.1.318.1.1.15.3.4.13.0"/>

		<!-- XPDU Input Contacts-->
		<stateSensor ruleid="contactstatus" index=".1.3.6.1.4.1.318.1.1.15.5.3.1.1">
			<type>state/xpduinputcontactstatus</type>
			<sensorId>XPDU_INPUT_CONTACT<rowIndex/>
			</sensorId>
			<value>
				<mapValue mapid="xpducontactstatemap">
					<getRowOid>.1.3.6.1.4.1.318.1.1.15.5.3.1.4</getRowOid>
				</mapValue>
			</value>
			<label>
				<getRowOid>.1.3.6.1.4.1.318.1.1.15.5.3.1.2</getRowOid>
			</label>
			<enum>openclosedstate</enum>
			<sensorSet>Contact Closures</sensorSet>
		</stateSensor>

		<!-- XPDU Output Relays-->
		<stateSensor ruleid="relaycontactstatus" index=".1.3.6.1.4.1.318.1.1.15.6.3.1.1">
			<type>state/xpdurelaycontactstatus</type>
			<sensorId>XPDU_RELAY_CONTACT<rowIndex/>
			</sensorId>
			<value>
				<mapValue mapid="xpducontactstatemap">
					<getRowOid>.1.3.6.1.4.1.318.1.1.15.6.3.1.4</getRowOid>
				</mapValue>
			</value>
			<label>
				<getRowOid>.1.3.6.1.4.1.318.1.1.15.6.3.1.2</getRowOid>
			</label>
			<enum>openclosedstate</enum>
			<sensorSet>Contact Closures</sensorSet>
		</stateSensor>

		<valueMap ruleid="xpducontactstatemap">
			<valueIn>1</valueIn>
			<valueOut>0</valueOut>
			<valueIn>2</valueIn>
			<valueOut>1</valueOut>
			<valueIn>*</valueIn>
			<valueOut>2</valueOut>
		</valueMap>

		<enumMap ruleid="openclosedstate">
			<label>Open</label>
			<label>Closed</label>
			<label>Unknown</label>
		</enumMap>

	</device>

	<!-- Section is for XPDU Miscellaneous-->
	<device deviceid="xpdu-xfrmr-tempstatus">

		<oidMustExist ruleid="xpdutransformertempstatusoid" oid=".1.3.6.1.4.1.318.1.1.15.7.2.0"/>
		<oidMustMatch ruleid="xpdutransformerexists" oid=".1.3.6.1.4.1.318.1.1.15.2.6.0">
			<valueList>
				<value>2</value>
				<!-- 1 = Not Present, 2 = Present -->
			</valueList>
		</oidMustMatch>

		<stateSensor ruleid="xpdutransformtempstatus">
			<type>state/transformtempstatus</type>
			<sensorId>XPDU_TRANSFORM_TEMP_STATUS</sensorId>
			<value>
				<mapValue mapid="xpdu-xfmr-tempstatusmap">
					<getOid>.1.3.6.1.4.1.318.1.1.15.7.2.0</getOid>
				</mapValue>
			</value>
			<label>Transformer Temperature Status</label>
			<enum>transtempstatus</enum>
			<sensorSet>Miscellaneous Status</sensorSet>
		</stateSensor>

		<valueMap ruleid="xpdu-xfmr-tempstatusmap">
			<valueIn>1</valueIn>
			<valueOut>0</valueOut>
			<valueIn>2</valueIn>
			<valueOut>1</valueOut>
			<valueIn>3</valueIn>
			<valueOut>2</valueOut>
			<valueIn>*</valueIn>
			<valueOut>3</valueOut>
		</valueMap>

		<enumMap ruleid="transtempstatus">
			<label>Normal</label>
			<label>Over Temperature</label>
			<label>No Transformer Present</label>
			<label>Unknown</label>
		</enumMap>
	</device>

	<device deviceid="xpdu-coolingfan-stauts">
		<oidMustExist ruleid="xpducoolingfanstatusoid" oid=".1.3.6.1.4.1.318.1.1.15.7.3.0"/>
		<oidMustMatch ruleid="xpducoolingfanspresent" oid=".1.3.6.1.4.1.318.1.1.15.2.10.0">
			<valueList>
				<value>2</value>
			</valueList>
		</oidMustMatch>

		<stateSensor ruleid="xpducoolingfanstatus">
			<type>state/coolingfanstatus</type>
			<sensorId>XPDU_COOLING_FAN_STATUS</sensorId>
			<value>
				<!-- cooling fan status uses the xfmr temperature status map -->
				<mapValue mapid="apcpower/xpdu-xfrmr-tempstatus/xpdu-xfmr-tempstatusmap">
					<getOid>.1.3.6.1.4.1.318.1.1.15.7.3.0</getOid>
				</mapValue>
			</value>
			<label>Cooling Fan Status</label>
			<enum>coolingfanstatus</enum>
			<sensorSet>Miscellaneous Status</sensorSet>
		</stateSensor>

		<enumMap ruleid="coolingfanstatus">
			<label>Normal</label>
			<label>Failed</label>
			<label>Not Present</label>
			<label>Unknown</label>
		</enumMap>

	</device>

	<!-- Section is for Breaker Panel Position Currents-->
	<device deviceid="panelbreakercurrentoids">
		<oidMustExist ruleid="breakerpanelindex" oid=".1.3.6.1.4.1.318.1.1.15.4.2.3.1.1.1"/>

		<numSensor ruleid="breakerpanelcurrent" index=".1.3.6.1.4.1.318.1.1.15.4.2.3.1.1">
			<rowTest>
				<mapValue mapid="apcpower/panelbreakercurrentoids/delete_null_sensor">
					<getRowOid>.1.3.6.1.4.1.318.1.1.15.4.2.3.1.5</getRowOid>
				</mapValue>
			</rowTest>
			<type>amperage/breakpanelpositioncurrent</type>
			<sensorId>BREAK_PANEL_CURRENT<rowIndex/>
			</sensorId>
			<value>
				<mult>
					<op>
						<getRowOid>.1.3.6.1.4.1.318.1.1.15.4.2.3.1.5</getRowOid>
					</op>
					<op>0.1</op>
				</mult>
			</value>
			<label>Current - Position<space/>
				<rowIndex/>
			</label>
			<sensorSet>Breaker Panel Positions<space/>1-<getOid>.1.3.6.1.4.1.318.1.1.15.4.2.1.0</getOid>
			</sensorSet>
		</numSensor>

		<valueMap ruleid="delete_null_sensor">
			<!-- omit sensors returning -1 -->
			<valueIn>-1</valueIn>
			<valueOut>[false]</valueOut>
			<!-- include the rest -->
			<valueIn>*</valueIn>
			<valueOut>[true]</valueOut>
		</valueMap>
	</device>

	<!-- Section is for new devices supporting the rPDUIdentDevicePowerWatts OIDs -->
	<device deviceid="rPDUtotalpoweroids">
		<oidMustMatch ruleid="sysobjid" oid=".1.3.6.1.2.1.1.2.0">
			<valueList>
				<value>.1.3.6.1.4.1.318.1.3.4.5</value>
				<!-- rPDU -->
				<value>.1.3.6.1.4.1.318.1.3.4.5.*</value>
				<!-- other rPDU -->
			</valueList>
		</oidMustMatch>
		<oidMustExist ruleid="totalpoweroid2" oid=".1.3.6.1.4.1.318.1.1.12.1.16.0"/>

		<numSensor ruleid="totalpower">
			<type>powerW/outputpower/total</type>
			<sensorId>OUTPUT_POWER_TOTAL</sensorId>
			<value>
				<getOid>.1.3.6.1.4.1.318.1.1.12.1.16.0</getOid>
			</value>
			<minValue>0.0</minValue>
			<valueInc>1</valueInc>
			<label>Total Power Output</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>

		<numSensor ruleid="totalapppower">
			<type>powerVA/apparentpower/total</type>
			<sensorId>OUTPUT_APPARENT_POWER_TOTAL</sensorId>
			<value>
				<getOid>.1.3.6.1.4.1.318.1.1.12.1.18.0</getOid>
			</value>
			<minValue>0.0</minValue>
			<valueInc>1</valueInc>
			<label>Total Apparent Power Output</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>

		<numSensor ruleid="totalpowerfactor">
			<type>num/powerfactor/total</type>
			<sensorId>OUTPUT_POWER_FACTOR_TOTAL</sensorId>
			<value>
				<mult>
					<op>
						<getOid>.1.3.6.1.4.1.318.1.1.12.1.17.0</getOid>
					</op>
					<op>0.001</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<maxValue>1.0</maxValue>
			<label>Total Power Factor</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
	</device>
	
	<!-- Section is for rPDU B devices supporting the rPDUIdentDevicePowerWatts OIDs -->
	<device deviceid="rPDUBtotalpoweroids">
		<oidMustMatch ruleid="sysobjid" oid=".1.3.6.1.2.1.1.2.0">
			<valueList>
				<value>.1.3.6.1.4.1.318.1.3.4.8</value>
				<!-- rPDU -->
				<value>.1.3.6.1.4.1.318.1.3.4.8.*</value>
				<!-- other rPDU -->
			</valueList>
		</oidMustMatch>
		<oidMustExist ruleid="totalpoweroid2" oid=".1.3.6.1.4.1.318.1.1.12.1.16.0"/>

		<numSensor ruleid="totalpower">
			<type>powerW/outputpower/total</type>
			<sensorId>OUTPUT_POWER_TOTAL</sensorId>
			<value>
				<getOid>.1.3.6.1.4.1.318.1.1.12.1.16.0</getOid>
			</value>
			<minValue>0.0</minValue>
			<valueInc>1</valueInc>
			<label>Total Power Output</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>

		<numSensor ruleid="totalapppower">
			<type>powerVA/apparentpower/total</type>
			<sensorId>OUTPUT_APPARENT_POWER_TOTAL</sensorId>
			<value>
				<getOid>.1.3.6.1.4.1.318.1.1.12.1.18.0</getOid>
			</value>
			<minValue>0.0</minValue>
			<valueInc>1</valueInc>
			<label>Total Apparent Power Output</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>

		<numSensor ruleid="totalpowerfactor">
			<type>num/powerfactor/total</type>
			<sensorId>OUTPUT_POWER_FACTOR_TOTAL</sensorId>
			<value>
				<mult>
					<op>
						<getOid>.1.3.6.1.4.1.318.1.1.12.1.17.0</getOid>
					</op>
					<op>0.001</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<maxValue>1.0</maxValue>
			<label>Total Power Factor</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
	</device>

	<!-- MasterSwitch 3 - single phase which don't support the total power OID -->
	<device deviceid="ms3singlephase">
		<oidMustMatch ruleid="sysobjid" oid=".1.3.6.1.2.1.1.2.0">
			<valueList>
				<value>.1.3.6.1.4.1.318.1.3.4.5</value>
				<!-- rPDU -->
				<value>.1.3.6.1.4.1.318.1.3.4.5.*</value>
				<!-- other rPDU -->
			</valueList>
		</oidMustMatch>
		<!-- total power oid -->
		<oidMustNotExist ruleid="rpdutotalpoweroid" oid=".1.3.6.1.4.1.318.1.1.12.1.16.0"/>
		<oidMustMatch ruleid="singlephase" oid=".1.3.6.1.4.1.318.1.1.12.1.9.0">
			<valueList>
				<value>1</value>
			</valueList>
		</oidMustMatch>

		<numSensor ruleid="totalpower">
			<type>powerW/totalpowerW</type>
			<sensorId>OUTPUT_POWER_TOTAL</sensorId>
			<value>
				<round increment="10">
					<mult>
						<op>
							<mapValue mapid="model2voltage">
								<getOid>.1.3.6.1.4.1.318.1.1.12.1.5.0</getOid> 
							</mapValue>
						</op>
						<op>
							<mult>
								<op>0.1</op>
								<!-- tenths of amps to W = 0.1 -->
								<op>
									<getOid default="0">.1.3.6.1.4.1.318.1.1.12.2.3.1.1.2.1</getOid>
								</op>
							</mult>
						</op>
					</mult>
				</round>
			</value>
			<minValue>0.0</minValue>
			<valueInc>10</valueInc>
			<label>Total Power Output</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>

		<numSensor ruleid="totalapppower">
			<type>powerVA/totalpowerVA</type>
			<sensorId>OUTPUT_APPARENT_POWER_TOTAL</sensorId>
			<value>
				<round increment="10">
					<mult>
						<op>
							<mapValue mapid="model2voltage">
								<getOid>.1.3.6.1.4.1.318.1.1.12.1.5.0</getOid>
							</mapValue>
						</op>
						<op>
							<mult>
								<op>0.1</op>
								<!-- tenths of amps to W = 0.1 -->
								<op>
									<getOid default="0">.1.3.6.1.4.1.318.1.1.12.2.3.1.1.2.1</getOid>
								</op>
							</mult>
						</op>
					</mult>
				</round>
			</value>
			<minValue>0.0</minValue>
			<valueInc>10</valueInc>
			<label>Total Apparent Power Output</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>

		<!-- Map shared with 3-phase rule -->
		<valueMap ruleid="model2voltage">
			<!-- SKUs not yet released -->
			<valueIn>AP7815</valueIn>
			<valueOut>208</valueOut>
			<valueIn>AP7897</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7910</valueIn>
			<valueOut>208</valueOut>
			<valueIn>AP7967</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7997</valueIn>
			<valueOut>120</valueOut>
			<!-- released SKUs -->
			<valueIn>AP7800</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7801</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7802</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7802J</valueIn>
			<valueOut>100</valueOut>
			<valueIn>AP7811</valueIn>
			<valueOut>208</valueOut>
			<valueIn>AP7820</valueIn>
			<valueOut>230</valueOut>
			<valueIn>AP7821</valueIn>
			<valueOut>230</valueOut>
			<valueIn>AP7822</valueIn>
			<valueOut>230</valueOut>
			<valueIn>AP7830</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7830J</valueIn>
			<valueOut>100</valueOut>
			<valueIn>AP7831</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7832</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7832J</valueIn>
			<valueOut>100</valueOut>
			<valueIn>AP7833JP</valueIn>
			<valueOut>100</valueOut>
			<valueIn>AP7840</valueIn>
			<valueOut>208</valueOut>
			<valueIn>AP7841</valueIn>
			<valueOut>208</valueOut>
			<valueIn>AP7850</valueIn>
			<valueOut>230</valueOut>
			<valueIn>AP7851</valueIn>
			<valueOut>230</valueOut>
			<valueIn>AP7852</valueIn>
			<valueOut>230</valueOut>
			<valueIn>AP7853</valueIn>
			<valueOut>230</valueOut>
			<valueIn>AP7854</valueIn>
			<valueOut>230</valueOut>
			<valueIn>AP7855</valueIn>
			<valueOut>230</valueOut>
			<valueIn>AP7855A</valueIn>
			<valueOut>230</valueOut>
			<valueIn>AP7856</valueIn>
			<valueOut>230</valueOut>
			<valueIn>AP7856X669</valueIn>
			<valueOut>230</valueOut>
			<valueIn>AP7856A</valueIn>
			<valueOut>230</valueOut>
			<valueIn>AP7856X563</valueIn>
			<valueOut>240</valueOut>
			<valueIn>AP7857</valueIn>
			<valueOut>230</valueOut>
			<valueIn>AP7862</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7862J</valueIn>
			<valueOut>100</valueOut>
			<valueIn>AP7862X135</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7863</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7863X135</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7864</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7866</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7866A</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7867</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7867A</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7868</valueIn>
			<valueOut>208</valueOut>
			<valueIn>AP7869</valueIn>
			<valueOut>208</valueOut>
			<valueIn>AP7892</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7893</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7894</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7898</valueIn>
			<valueOut>208</valueOut>
			<valueIn>AP7899</valueIn>
			<valueOut>208</valueOut>
			<valueIn>AP7900</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7901</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7902</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7902J</valueIn>
			<valueOut>100</valueOut>
			<valueIn>AP7911</valueIn>
			<valueOut>208</valueOut>
			<valueIn>AP7911A</valueIn>
			<valueOut>208</valueOut>
			<valueIn>AP7920</valueIn>
			<valueOut>208</valueOut>
			<valueIn>AP7921</valueIn>
			<valueOut>208</valueOut>
			<valueIn>AP7922</valueIn>
			<valueOut>230</valueOut>
			<valueIn>AP7930</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7930J</valueIn>
			<valueOut>100</valueOut>
			<valueIn>AP7931</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7932</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7932J</valueIn>
			<valueOut>100</valueOut>
			<valueIn>AP7940</valueIn>
			<valueOut>208</valueOut>
			<valueIn>AP7941</valueIn>
			<valueOut>208</valueOut>
			<valueIn>AP7950</valueIn>
			<valueOut>230</valueOut>
			<valueIn>AP7951</valueIn>
			<valueOut>230</valueOut>
			<valueIn>AP7952</valueIn>
			<valueOut>230</valueOut>
			<valueIn>AP7953</valueIn>
			<valueOut>230</valueOut>
			<valueIn>AP7954</valueIn>
			<valueOut>230</valueOut>
			<valueIn>AP7957</valueIn>
			<valueOut>230</valueOut>
			<valueIn>AP7960</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7961</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7961X364</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7968</valueIn>
			<valueOut>208</valueOut>
			<valueIn>AP7990</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7991</valueIn>
			<valueOut>120</valueOut>
			<valueIn>AP7998</valueIn>
			<valueOut>208</valueOut>
			<!-- ILCM -->
			<valueIn>AP7152</valueIn>
			<valueOut>230</valueOut>
			<valueIn>AP7155</valueIn>
			<valueOut>230</valueOut>
			<valueIn>AP7175</valueIn>
			<valueOut>230</valueOut>
			<!-- default -->
			<valueIn>*</valueIn>
			<valueOut>120</valueOut>
		</valueMap>
	</device>
	<!-- MasterSwitch v3 - single phase, with 2 Banks power per bank -->
	<device deviceid="ms3twobankpowerpre3x">
		<oidMustMatch ruleid="sysobjid" oid=".1.3.6.1.2.1.1.2.0">
			<valueList>
				<value>.1.3.6.1.4.1.318.1.3.4.5</value>
				<!-- rPDU -->
				<value>.1.3.6.1.4.1.318.1.3.4.5.*</value>
				<!-- other rPDU -->
			</valueList>
		</oidMustMatch>
		<oidMustMatch ruleid="singlephase" oid=".1.3.6.1.4.1.318.1.1.12.1.9.0">
			<valueList>
				<value>1</value>
			</valueList>
		</oidMustMatch>
		<oidMustMatch ruleid="sPDUNumBanks" oid=".1.3.6.1.4.1.318.1.1.12.2.1.4.0">
			<valueList>
				<value>2</value>
			</valueList>
		</oidMustMatch>
		<numSensor ruleid="powerbank1">
			<type>powerW</type>
			<sensorId>OUTPUT_POWER_BANK_1</sensorId>
			<value>
				<mult>
					<op>
						<!-- voltage, assume pf is 1-->
						<mapValue mapid="apcpower/ms3singlephase/model2voltage">
							<getOid>.1.3.6.1.4.1.318.1.1.12.1.5.0</getOid>
						</mapValue>
					</op>
					<op>
						<mult>
							<op>
								<getOid default="0">.1.3.6.1.4.1.318.1.1.12.2.3.1.1.2.2</getOid>
							</op>
							<op>0.1</op>
						</mult>
					</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<label>Power - Bank 1</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
		<numSensor ruleid="powerbank2">
			<type>powerW</type>
			<sensorId>OUTPUT_POWER_BANK_2</sensorId>
			<value>
				<mult>
					<op>
						<!-- voltage, assume pf is 1-->
						<mapValue mapid="apcpower/ms3singlephase/model2voltage">
							<getOid>.1.3.6.1.4.1.318.1.1.12.1.5.0</getOid>
						</mapValue>
					</op>
					<op>
						<mult>
							<op>
								<getOid default="0">.1.3.6.1.4.1.318.1.1.12.2.3.1.1.2.3</getOid>
							</op>
							<op>0.1</op>
						</mult>
					</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<label>Power - Bank 2</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
	</device>
	<!-- MasterSwitch v3 - single phase, with 2 Banks power per bank, devices with power factor-->
	<device deviceid="ms3twobankpower">
		<oidMustMatch ruleid="sysobjid" oid=".1.3.6.1.2.1.1.2.0">
			<valueList>
				<value>.1.3.6.1.4.1.318.1.3.4.5</value>
				<!-- rPDU -->
				<value>.1.3.6.1.4.1.318.1.3.4.5.*</value>
				<!-- other rPDU -->
			</valueList>
		</oidMustMatch>
		<oidMustMatch ruleid="singlephase" oid=".1.3.6.1.4.1.318.1.1.12.1.9.0">
			<valueList>
				<value>1</value>
			</valueList>
		</oidMustMatch>
		<oidMustMatch ruleid="sPDUNumBanks" oid=".1.3.6.1.4.1.318.1.1.12.2.1.4.0">
			<valueList>
				<value>2</value>
			</valueList>
		</oidMustMatch>
		<oidMustExist ruleid="powerfactoroid" oid=".1.3.6.1.4.1.318.1.1.12.1.17.0"/>
		<suppressRule ruleid="stompmsv3powerbank1" suppressid="apcpower/ms3twobankpowerpre3x/powerbank1"/>
		<suppressRule ruleid="stompmsv3powerbank2" suppressid="apcpower/ms3twobankpowerpre3x/powerbank2"/>
		<numSensor ruleid="powerbank1">
			<type>powerW</type>
			<sensorId>OUTPUT_POWER_BANK_1</sensorId>
			<value>
				<mult>
					<op>
						<mult>
							<op>
								<mult>
									<op>
										<getOid default="1">.1.3.6.1.4.1.318.1.1.12.1.17.0</getOid>
									</op>
									<op>0.001</op>
								</mult>
							</op>
							<op>
								<!-- voltage -->
								<getOid>.1.3.6.1.4.1.318.1.1.12.1.15.0</getOid>
							</op>
						</mult>
					</op>
					<op>
						<mult>
							<op>
								<getOid default="0">.1.3.6.1.4.1.318.1.1.12.2.3.1.1.2.2</getOid>
							</op>
							<op>0.1</op>
						</mult>
					</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<label>Power - Bank 1</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
		<numSensor ruleid="powerbank2">
			<type>powerW</type>
			<sensorId>OUTPUT_POWER_BANK_2</sensorId>
			<value>
				<mult>
					<op>
						<mult>
							<op>
								<mult>
									<op>
										<getOid default="1">.1.3.6.1.4.1.318.1.1.12.1.17.0</getOid>
									</op>
									<op>0.001</op>
								</mult>
							</op>
							<op>
								<!-- voltage -->
								<getOid>.1.3.6.1.4.1.318.1.1.12.1.15.0</getOid>
							</op>
						</mult>
					</op>
					<op>
						<mult>
							<op>
								<getOid default="0">.1.3.6.1.4.1.318.1.1.12.2.3.1.1.2.3</getOid>
							</op>
							<op>0.1</op>
						</mult>
					</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<label>Power - Bank 2</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
	</device>
	<!-- MasterSwitch v3 - single phase, with 2 Banks VA per bank -->
	<device deviceid="ms3twobankpowerva">
		<oidMustMatch ruleid="sysobjid" oid=".1.3.6.1.2.1.1.2.0">
			<valueList>
				<value>.1.3.6.1.4.1.318.1.3.4.5</value>
				<!-- rPDU -->
				<value>.1.3.6.1.4.1.318.1.3.4.5.*</value>
				<!-- other rPDU -->
			</valueList>
		</oidMustMatch>
		<oidMustMatch ruleid="singlephase" oid=".1.3.6.1.4.1.318.1.1.12.1.9.0">
			<valueList>
				<value>1</value>
			</valueList>
		</oidMustMatch>
		<oidMustMatch ruleid="sPDUNumBanks" oid=".1.3.6.1.4.1.318.1.1.12.2.1.4.0">
			<valueList>
				<value>2</value>
			</valueList>
		</oidMustMatch>
		<numSensor ruleid="powerbank1">
			<type>powerVA</type>
			<sensorId>BANK_OUTPUT_POWERVA_1</sensorId>
			<value>
				<mult>
					<op>
						<!-- voltage -->
						<getOid>.1.3.6.1.4.1.318.1.1.12.1.15.0</getOid>
					</op>
					<op>
						<mult>
							<op>
								<getOid default="0">.1.3.6.1.4.1.318.1.1.12.2.3.1.1.2.2</getOid>
							</op>
							<op>0.1</op>
						</mult>
					</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<label>Apparent Power - Bank 1</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
		<numSensor ruleid="powerbank2">
			<type>powerVA</type>
			<sensorId>BANK_OUTPUT_POWERVA_2</sensorId>
			<value>
				<mult>

					<op>
						<!-- voltage -->
						<getOid>.1.3.6.1.4.1.318.1.1.12.1.15.0</getOid>
					</op>
					<op>
						<mult>
							<op>
								<getOid default="0">.1.3.6.1.4.1.318.1.1.12.2.3.1.1.2.3</getOid>
							</op>
							<op>0.1</op>
						</mult>
					</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<label>Apparent Power - Bank 2</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
	</device>

	<!-- MasterSwitch 3 - 3 phase per phase apparent power-->
	<device deviceid="ms3threephaseva">
		<oidMustMatch ruleid="sysobjid" oid=".1.3.6.1.2.1.1.2.0">
			<valueList>
				<value>.1.3.6.1.4.1.318.1.3.4.5</value>
				<!-- rPDU -->
				<value>.1.3.6.1.4.1.318.1.3.4.5.*</value>
				<!-- other rPDU -->
			</valueList>
		</oidMustMatch>
		<oidMustMatch ruleid="threephase" oid=".1.3.6.1.4.1.318.1.1.12.1.9.0">
			<valueList>
				<value>3</value>
			</valueList>
		</oidMustMatch>
		<!-- per phase power (VA) -->
		<numSensor ruleid="apppower" index=".1.3.6.1.4.1.318.1.1.12.2.3.1.1.1">
			<type>powerVA</type>
			<sensorId>RPDU_OUTPUT_APPARENT_POWER_<rowIndex/>
			</sensorId>
			<!-- VA = (A * 0.1)(V) -->
			<value>
				<mult>
					<op>
						<mult>
							<op>
								<getRowOid default="0">.1.3.6.1.4.1.318.1.1.12.2.3.1.1.2</getRowOid>
							</op>
							<op>0.1</op>
						</mult>
					</op>
					<op>
						<div>
							<op>
								<getOid>.1.3.6.1.4.1.318.1.1.12.1.15.0</getOid>
							</op>
							<op>
								<mapValue mapid="voltage_coefficient">
									<getOid>.1.3.6.1.4.1.318.1.1.12.1.13.0</getOid>
								</mapValue>
							</op>
						</div>
					</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<valueInc>10</valueInc>
			<label>Apparent Power -<space/>
				<mapValue mapid="phaseorbankselect">
					<getOid>.1.3.6.1.4.1.318.1.1.12.2.1.4.0</getOid>
				</mapValue>
				<space/>
				<rowIndex/>
			</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>

		<valueMap ruleid="phaseorbankselect">
			<valueIn>3</valueIn>
			<valueOut>Bank</valueOut>
			<valueIn>*</valueIn>
			<valueOut>Phase</valueOut>
		</valueMap>
		<valueMap ruleid="voltage_coefficient">
			<valueIn>4</valueIn>
			<valueOut>1</valueOut>
			<valueIn>7</valueIn>
			<valueOut>1</valueOut>
			<valueIn>9</valueIn>
			<valueOut>1</valueOut>
			<valueIn>*</valueIn>
			<valueOut>1.732</valueOut>
		</valueMap>
	</device>
	<!-- rPDU B Bank Output-->
	<device deviceid="rPDUB_bank_output">
		<oidMustMatch ruleid="sysobjid" oid=".1.3.6.1.2.1.1.2.0">
			<valueList>
				<value>.1.3.6.1.4.1.318.1.3.4.8</value>
				<!-- rPDU -->
				<value>.1.3.6.1.4.1.318.1.3.4.8.*</value>
				<!-- other rPDU -->
			</valueList>
		</oidMustMatch>
		<oidMustExist ruleid="rpdu2_banks_exist" oid=".1.3.6.1.4.1.318.1.1.26.7.0"/>
		<oidMustNotMatch ruleid="rpdu2_bank_table_size" oid=".1.3.6.1.4.1.318.1.1.26.7.0">
			<valueList>
				<value>0</value>
			</valueList>
		</oidMustNotMatch>
		
		<numSensor ruleid="rpdub_bank_current" index=".1.3.6.1.4.1.318.1.1.12.2.3.1.1.5">
			<rowTest>
				<mapValue mapid="isbank">
					<getRowOid>.1.3.6.1.4.1.318.1.1.12.2.3.1.1.5</getRowOid>
				</mapValue>
			</rowTest>
			<type>amperage</type>
			<sensorId>RPDU_BANK_OUTPUT_CURRENT_<rowIndex/></sensorId>
			<value>
				<mult>
					<op>0.1</op>
					<op>
						<getRowOid>.1.3.6.1.4.1.318.1.1.12.2.3.1.1.2</getRowOid>
					</op>
				</mult>
			</value>
			<label>Current - Bank <getRowOid>.1.3.6.1.4.1.318.1.1.12.2.3.1.1.5</getRowOid></label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
		<numSensor ruleid="rpdub_bank_apppower" index=".1.3.6.1.4.1.318.1.1.12.2.3.1.1.5">
			<rowTest>
				<mapValue mapid="isbank">
					<getRowOid>.1.3.6.1.4.1.318.1.1.12.2.3.1.1.5</getRowOid>
				</mapValue>
			</rowTest>
			<type>powerVA</type>
			<sensorId>RPDU_BANK_OUTPUT_APPARENT_POWER_<rowIndex/></sensorId>
			<!-- VA = (A * 0.1)(V) -->
			<value>
				<mult>
					<op>
						<mult>
							<op>
								<getRowOid>.1.3.6.1.4.1.318.1.1.12.2.3.1.1.2</getRowOid>
							</op>
							<op>0.1</op>
						</mult>
					</op>
					<op>
						<div>
							<op>
								<getOid>.1.3.6.1.4.1.318.1.1.12.1.15.0</getOid>
							</op>
							<op>
								<mapValue mapid="apcpower/ms3threephaseva/voltage_coefficient">
									<getOid>.1.3.6.1.4.1.318.1.1.12.1.13.0</getOid>
								</mapValue>
							</op>
						</div>
					</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<valueInc>10</valueInc>
			<label>Apparent Power - Bank <getRowOid>.1.3.6.1.4.1.318.1.1.12.2.3.1.1.5</getRowOid></label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
		<numSensor ruleid="rpdub_bank_power" index=".1.3.6.1.4.1.318.1.1.12.2.3.1.1.5">
			<rowTest>
				<mapValue mapid="isbank">
					<getRowOid>.1.3.6.1.4.1.318.1.1.12.2.3.1.1.5</getRowOid>
				</mapValue>
			</rowTest>
			<type>powerW</type>
			<sensorId>RPDU_BANK_OUTPUT_POWER_<rowIndex/></sensorId>
			<!-- W = (A * .1)(V)(PF * .001) -->
			<value>
				<mult>
					<op>
						<!-- current scaled to Amps -->
						<mult> 
							<op>0.1</op>
							<op>
								<getRowOid>.1.3.6.1.4.1.318.1.1.12.2.3.1.1.2</getRowOid>
							</op>
						</mult>
					</op>
					<op>
						<!-- voltage * PF -->
						<mult>
							<op>
								<div>
									<op>
										<getOid>.1.3.6.1.4.1.318.1.1.12.1.15.0</getOid>
									</op>
									<op>
										<mapValue mapid="apcpower/ms3threephaseva/voltage_coefficient">
											<getOid>.1.3.6.1.4.1.318.1.1.12.1.13.0</getOid>
										</mapValue>
									</op>
								</div>
							</op>
							<op>  
								<mult> 
									<op>
										<getOid>.1.3.6.1.4.1.318.1.1.12.1.17.0</getOid>
									</op>
									<op>0.001</op>
								</mult>
							</op>
						</mult>
					</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<valueInc>10</valueInc>
			<label>Power - Bank <getRowOid>.1.3.6.1.4.1.318.1.1.12.2.3.1.1.5</getRowOid></label>
			<sensorSet>System Output</sensorSet>
		</numSensor>

		<valueMap ruleid="isbank">
			<valueIn>*</valueIn><valueOut>[true]</valueOut>
			<valueIn>0</valueIn><valueOut>[false]</valueOut>
		</valueMap>
	</device>
	<!-- rPDU B Phase Output-->
	<device deviceid="rPDUB_phase_output">
		<oidMustMatch ruleid="sysobjid" oid=".1.3.6.1.2.1.1.2.0">
			<valueList>
				<value>.1.3.6.1.4.1.318.1.3.4.8</value>
				<!-- rPDU -->
				<value>.1.3.6.1.4.1.318.1.3.4.8.*</value>
				<!-- other rPDU -->
			</valueList>
		</oidMustMatch>
		<oidMustExist ruleid="rpdu2_phase_exist" oid=".1.3.6.1.4.1.318.1.1.26.5.0"/>
		<oidMustNotMatch ruleid="rpdu2_phase_table_size" oid=".1.3.6.1.4.1.318.1.1.26.5.0">
			<valueList>
				<value>0</value>
			</valueList>
		</oidMustNotMatch>
		
		<numSensor ruleid="rpdub_phase_current" index=".1.3.6.1.4.1.318.1.1.12.2.3.1.1.1">
			<rowTest>
				<mapValue mapid="isphase">
					<getRowOid>.1.3.6.1.4.1.318.1.1.12.2.3.1.1.4</getRowOid>
				</mapValue>
			</rowTest>
			<type>amperage</type>
			<sensorId>RPDU_PHASE_OUTPUT_CURRENT_<rowIndex/></sensorId>
			<value>
				<mult>
					<op>0.1</op>
					<op>
						<getRowOid>.1.3.6.1.4.1.318.1.1.12.2.3.1.1.2</getRowOid>
					</op>
				</mult>
			</value>
			<label>Current - Phase <getRowOid>.1.3.6.1.4.1.318.1.1.12.2.3.1.1.4</getRowOid></label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
		<numSensor ruleid="rpdub_phase_apppower" index=".1.3.6.1.4.1.318.1.1.12.2.3.1.1.1">
			<rowTest>
				<mapValue mapid="isphase">
					<getRowOid>.1.3.6.1.4.1.318.1.1.12.2.3.1.1.4</getRowOid>
				</mapValue>
			</rowTest>
			<type>powerVA</type>
			<sensorId>RPDU_PHASE_OUTPUT_APPARENT_POWER_<rowIndex/></sensorId>
			<!-- VA = (A * 0.1)(V) -->
			<value>
				<mult>
					<op>
						<mult>
							<op>
								<getRowOid>.1.3.6.1.4.1.318.1.1.12.2.3.1.1.2</getRowOid>
							</op>
							<op>0.1</op>
						</mult>
					</op>
					<op>
						<div>
							<op>
								<getOid>.1.3.6.1.4.1.318.1.1.12.1.15.0</getOid>
							</op>
							<op>
								<mapValue mapid="apcpower/ms3threephaseva/voltage_coefficient">
									<getOid>.1.3.6.1.4.1.318.1.1.12.1.13.0</getOid>
								</mapValue>
							</op>
						</div>
					</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<valueInc>10</valueInc>
			<label>Apparent Power - Phase <getRowOid>.1.3.6.1.4.1.318.1.1.12.2.3.1.1.4</getRowOid>
			</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
		<numSensor ruleid="rpdub_phase_power" index=".1.3.6.1.4.1.318.1.1.12.2.3.1.1.1">
			<rowTest>
				<mapValue mapid="isphase">
					<getRowOid>.1.3.6.1.4.1.318.1.1.12.2.3.1.1.4</getRowOid>
				</mapValue>
			</rowTest>
			<type>powerW</type>
			<sensorId>RPDU_PHASE_OUTPUT_POWER_<rowIndex/></sensorId>
			<!-- W = (A * .1)(V)(PF * .001) -->
			<value>
				<mult>
					<op>
						<!-- current scaled to Amps -->
						<mult> 
							<op>0.1</op>
							<op>
								<getRowOid>.1.3.6.1.4.1.318.1.1.12.2.3.1.1.2</getRowOid>
							</op>
						</mult>
					</op>
					<op>
						<!-- voltage * PF -->
						<mult>
							<op>
								<div>
									<op>
										<getOid>.1.3.6.1.4.1.318.1.1.12.1.15.0</getOid>
									</op>
									<op>
										<mapValue mapid="apcpower/ms3threephaseva/voltage_coefficient">
											<getOid>.1.3.6.1.4.1.318.1.1.12.1.13.0</getOid>
										</mapValue>
									</op>
								</div>
							</op>
							<op>  
								<mult> 
									<op>
										<getOid>.1.3.6.1.4.1.318.1.1.12.1.17.0</getOid>
									</op>
									<op>0.001</op>
								</mult>
							</op>
						</mult>
					</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<valueInc>10</valueInc>
			<label>Power - Phase <getRowOid>.1.3.6.1.4.1.318.1.1.12.2.3.1.1.4</getRowOid></label>
			<sensorSet>System Output</sensorSet>
		</numSensor>

		<valueMap ruleid="isphase">
			<valueIn>*</valueIn><valueOut>[true]</valueOut>
			<valueIn>0</valueIn><valueOut>[false]</valueOut>
		</valueMap>
	</device>
	<device deviceid="ms3threephasepower">
		<oidMustMatch ruleid="sysobjid" oid=".1.3.6.1.2.1.1.2.0">
			<valueList>
				<value>.1.3.6.1.4.1.318.1.3.4.5</value>
				<!-- rPDU -->
				<value>.1.3.6.1.4.1.318.1.3.4.5.*</value>
				<!-- other rPDU -->
			</valueList>
		</oidMustMatch>
		<oidMustExist ruleid="powerfactoroid" oid=".1.3.6.1.4.1.318.1.1.12.1.17.0"/>
		<oidMustMatch ruleid="threephase" oid=".1.3.6.1.4.1.318.1.1.12.1.9.0">
			<valueList>
				<value>3</value>
			</valueList>
		</oidMustMatch>
		<!-- per phase power (W) -->
		<numSensor ruleid="power" index=".1.3.6.1.4.1.318.1.1.12.2.3.1.1.1">
			<type>powerW</type>
			<sensorId>RPDU_OUTPUT_POWER_<rowIndex/>
			</sensorId>
			<!-- W = (A * .1)(V)(PF * .001) -->
			<value>
				<mult>
					<op>
						<!-- current scaled to Amps -->
						<mult> 
							<op>0.1</op>
							<op>
								<getRowOid>.1.3.6.1.4.1.318.1.1.12.2.3.1.1.2</getRowOid>
							</op>
						</mult>
					</op>
					<op>
						<!-- voltage * PF -->
						<mult>
							<op>
								<div>
									<op>
										<getOid>.1.3.6.1.4.1.318.1.1.12.1.15.0</getOid>
									</op>
									<op>
										<mapValue mapid="apcpower/ms3threephaseva/voltage_coefficient">
											<getOid>.1.3.6.1.4.1.318.1.1.12.1.13.0</getOid>
										</mapValue>
									</op>
								</div>
							</op>
							<op>  
								<mult> 
									<op>
										<getOid>.1.3.6.1.4.1.318.1.1.12.1.17.0</getOid>
									</op>
									<op>0.001</op>
								</mult>
							</op>
						</mult>
					</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<valueInc>10</valueInc>
			<label>Power -<space/>
				<mapValue mapid="apcpower/ms3threephaseva/phaseorbankselect">
					<getOid>.1.3.6.1.4.1.318.1.1.12.2.1.4.0</getOid>
				</mapValue>
				<space/>
				<rowIndex/>
			</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
	</device>
	<!-- per phase VA for rPDUs which have phase-phase outlet orientation but measure
	current in the input phases -->
	<device deviceid="ms3threephasevaatinputct">
		<oidMustMatch ruleid="sysobjid" oid=".1.3.6.1.2.1.1.2.0">
			<valueList>
				<value>.1.3.6.1.4.1.318.1.3.4.5</value>
				<!-- rPDU -->
				<value>.1.3.6.1.4.1.318.1.3.4.5.*</value>
				<!-- other rPDU -->
			</valueList>
		</oidMustMatch>
		<oidMustMatch ruleid="modelnum" oid=".1.3.6.1.4.1.318.1.1.12.1.5.0">
			<valueList>
				<value>AP7961</value>
				<value>AP7991</value>
			</valueList>
		</oidMustMatch>
		<suppressRule ruleid="suppress3phaseva" suppressid="apcpower/ms3threephaseva/apppower"/>
		<!-- per phase power (VA) -->
		<numSensor ruleid="apppower" index=".1.3.6.1.4.1.318.1.1.12.2.3.1.1.1">
			<type>powerVA</type>
			<sensorId>RPDU_OUTPUT_APPARENT_POWER_<rowIndex/>
			</sensorId>
			<!-- VA = (A * 0.1)(V) -->
			<value>
				<mult>
					<op>
						<mult>
							<op>
								<getRowOid default="0">.1.3.6.1.4.1.318.1.1.12.2.3.1.1.2</getRowOid>
							</op>
							<op>0.1</op>
						</mult>
					</op>
					<op>
						<div>
							<op>
								<getOid>.1.3.6.1.4.1.318.1.1.12.1.15.0</getOid>
							</op>
							<op>1.732</op>
						</div>
					</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<valueInc>10</valueInc>
			<label>Apparent Power -<space/>
				<mapValue mapid="apcpower/ms3threephaseva/phaseorbankselect">
					<getOid>.1.3.6.1.4.1.318.1.1.12.2.1.4.0</getOid>
				</mapValue>
				<space/>
				<rowIndex/>
			</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
	</device>
	<!-- per phase power for rPDUs which have phase-phase outlet orientation but measure
	current in the input phases -->
	<device deviceid="ms3threephasepoweratinputct">
		<oidMustMatch ruleid="sysobjid" oid=".1.3.6.1.2.1.1.2.0">
			<valueList>
				<value>.1.3.6.1.4.1.318.1.3.4.5</value>
				<!-- rPDU -->
				<value>.1.3.6.1.4.1.318.1.3.4.5.*</value>
				<!-- other rPDU -->
			</valueList>
		</oidMustMatch>
		<oidMustExist ruleid="powerfactoroid" oid=".1.3.6.1.4.1.318.1.1.12.1.17.0"/>
		<oidMustMatch ruleid="modelnum" oid=".1.3.6.1.4.1.318.1.1.12.1.5.0">
			<valueList>
				<value>AP7961</value>
				<value>AP7991</value>
			</valueList>
		</oidMustMatch>
		<suppressRule ruleid="suppress3phasepower" suppressid="apcpower/ms3threephasepower/power"/>
		<!-- per phase power (W) -->
		<numSensor ruleid="power" index=".1.3.6.1.4.1.318.1.1.12.2.3.1.1.1">
			<type>powerW</type>
			<sensorId>RPDU_OUTPUT_POWER_<rowIndex/>
			</sensorId>
			<!-- W = (A * .1)(V)(PF * .001) -->
			<value>
				<mult>
					<op>
						<!-- current scaled to Amps -->
						<mult> 
							<op>0.1</op>
							<op>
								<getRowOid>.1.3.6.1.4.1.318.1.1.12.2.3.1.1.2</getRowOid>
							</op>
						</mult>
					</op>
					<op>
						<!-- voltage * PF -->
						<mult>
							<op>
								<div>
									<op>
										<getOid>.1.3.6.1.4.1.318.1.1.12.1.15.0</getOid>
									</op>
									<op>1.732</op>
								</div>
							</op>
							<op>  
								<mult> 
									<op>
										<getOid>.1.3.6.1.4.1.318.1.1.12.1.17.0</getOid>
									</op>
									<op>0.001</op>
								</mult>
							</op>
						</mult>
					</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<valueInc>10</valueInc>
			<label>Power -<space/>
				<mapValue mapid="apcpower/ms3threephaseva/phaseorbankselect">
					<getOid>.1.3.6.1.4.1.318.1.1.12.2.1.4.0</getOid>
				</mapValue>
				<space/>
				<rowIndex/>
			</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
	</device>
	<!-- per phase VA and watts for split phase rPDUs -->
	<device deviceid="ms3splitphaseloadperphase">
		<oidMustMatch ruleid="sysobjid" oid=".1.3.6.1.2.1.1.2.0">
			<valueList>
				<value>.1.3.6.1.4.1.318.1.3.4.5</value>
				<!-- rPDU -->
				<value>.1.3.6.1.4.1.318.1.3.4.5.*</value>
				<!-- other rPDU -->
			</valueList>
		</oidMustMatch>
		<oidMustMatch ruleid="splitphase" oid=".1.3.6.1.4.1.318.1.1.12.1.9.0">
			<valueList>
				<value>2</value>
			</valueList>
		</oidMustMatch>
		<!-- per phase power (VA) -->
		<numSensor ruleid="apppower" index=".1.3.6.1.4.1.318.1.1.12.2.3.1.1.1">
			<type>powerVA</type>
			<sensorId>RPDU_OUTPUT_APPARENT_POWER_<rowIndex/>
			</sensorId>
			<!-- VA = (A * 0.1)(V) -->
			<value>
				<mult>
					<op>
						<mult>
							<op>
								<getRowOid default="0">.1.3.6.1.4.1.318.1.1.12.2.3.1.1.2</getRowOid>
							</op>
							<op>0.1</op>
						</mult>
					</op>
					<op>
						<getOid>
							<mapValue mapid="voltageoidselect">
								<getRowOid>.1.3.6.1.4.1.318.1.1.12.2.3.1.1.5</getRowOid>
							</mapValue>
						</getOid>
					</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<valueInc>10</valueInc>
			<label>Apparent Power -<space/>
				<mapValue mapid="apcpower/ms3threephaseva/phaseorbankselect">
					<getOid>.1.3.6.1.4.1.318.1.1.12.2.1.4.0</getOid>
				</mapValue>
				<space/>
				<rowIndex/>
			</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
		<!-- per phase power (W) -->
		<numSensor ruleid="power" index=".1.3.6.1.4.1.318.1.1.12.2.3.1.1.1">
			<type>powerW</type>
			<sensorId>RPDU_OUTPUT_POWER_<rowIndex/>
			</sensorId>
			<!-- W = (A * .1)(V)(PF * .001) -->
			<value>
				<mult>
					<op>
						<!-- current scaled to Amps -->
						<mult> 
							<op>0.1</op>
							<op>
								<getRowOid>.1.3.6.1.4.1.318.1.1.12.2.3.1.1.2</getRowOid>
							</op>
						</mult>
					</op>
					<op>
						<!-- voltage * PF -->
						<mult>
							<op>
								<getOid>
									<mapValue mapid="voltageoidselect">
										<getRowOid>.1.3.6.1.4.1.318.1.1.12.2.3.1.1.5</getRowOid>
									</mapValue>
								</getOid>
							</op>
							<op>  
								<mult> 
									<op>
										<getOid>.1.3.6.1.4.1.318.1.1.12.1.17.0</getOid>
									</op>
									<op>0.001</op>
								</mult>
							</op>
						</mult>
					</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<valueInc>10</valueInc>
			<label>Power -<space/>
				<mapValue mapid="apcpower/ms3threephaseva/phaseorbankselect">
					<getOid>.1.3.6.1.4.1.318.1.1.12.2.1.4.0</getOid>
				</mapValue>
				<space/>
				<rowIndex/>
			</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
		<valueMap ruleid="voltageoidselect">
			<valueIn>1</valueIn>
			<valueOut>.1.3.6.1.4.1.318.1.1.12.1.15.0</valueOut>
			<valueIn>*</valueIn>
			<valueOut>.1.3.6.1.4.1.318.1.1.12.1.19.0</valueOut>
		</valueMap>
	</device>
	<!-- MasterSwitch 3 - 3  which don't support PF oid -->
	<device deviceid="ms3threephase_pre3x">
		<oidMustMatch ruleid="sysobjid" oid=".1.3.6.1.2.1.1.2.0">
			<valueList>
				<value>.1.3.6.1.4.1.318.1.3.4.5</value>
				<!-- rPDU -->
				<value>.1.3.6.1.4.1.318.1.3.4.5.*</value>
				<!-- other rPDU -->
			</valueList>
		</oidMustMatch>
		<oidMustNotExist ruleid="powerfactoroid" oid=".1.3.6.1.4.1.318.1.1.12.1.17.0"/>
		<oidMustMatch ruleid="threephase" oid=".1.3.6.1.4.1.318.1.1.12.1.9.0">
			<valueList>
				<value>3</value>
			</valueList>
		</oidMustMatch>
		<!-- per phase power (W) -->
		<numSensor ruleid="power" index=".1.3.6.1.4.1.318.1.1.12.2.3.1.1.1">
			<type>powerW</type>
			<sensorId>RPDU_OUTPUT_POWER_<rowIndex/>
			</sensorId>
			<!-- W = (A * .1)(V)(PF * .001) -->
			<!-- We multiply V by 0.1 instead of A because of the associative property of multiplication. -->
			<value>
				<mult>
					<op>
						<!-- current scaled to Amps -->
						<mult> 
							<op>0.1</op>
							<op>
								<getRowOid>.1.3.6.1.4.1.318.1.1.12.2.3.1.1.2</getRowOid>
							</op>
						</mult>
					</op>
					<op>
						<!-- voltage * PF -->
						<mult>
							<op>
								<!-- voltage -->
								<mapValue mapid="apcpower/ms3singlephase/model2voltage">
									<getOid>.1.3.6.1.4.1.318.1.1.12.1.5.0</getOid>
								</mapValue>
							</op>
							<op>1.0</op>
						</mult>
					</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<valueInc>10</valueInc>
			<label>Power -<space/>
				<mapValue mapid="apcpower/ms3threephaseva/phaseorbankselect">
					<getOid>.1.3.6.1.4.1.318.1.1.12.2.1.4.0</getOid>
				</mapValue>
				<space/>
				<rowIndex/>
			</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
	</device>
	<!-- MasterSwitch 3 - single phase, no banks current-->
	<device deviceid="ms3singlephasecurrent">
		<oidMustMatch ruleid="sysobjid" oid=".1.3.6.1.2.1.1.2.0">
			<valueList>
				<value>.1.3.6.1.4.1.318.1.3.4.5</value>
				<!-- rPDU -->
				<value>.1.3.6.1.4.1.318.1.3.4.5.*</value>
				<!-- other rPDU -->
			</valueList>
		</oidMustMatch>
		<oidMustMatch ruleid="singlephase" oid=".1.3.6.1.4.1.318.1.1.12.1.9.0">
			<valueList>
				<value>1</value>
			</valueList>
		</oidMustMatch>
		<oidMustMatch ruleid="sPDUNumBanks" oid=".1.3.6.1.4.1.318.1.1.12.2.1.4.0">
			<valueList>
				<value>0</value>
			</valueList>
		</oidMustMatch>

		<numSensor ruleid="current">
			<type>amperage/outputamperage</type>
			<sensorId>OUTPUT_CURRENT_1</sensorId>
			<value>
				<mult>
					<op>
						<getOid>.1.3.6.1.4.1.318.1.1.12.2.3.1.1.2.1</getOid>
					</op>
					<op>0.1</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<maxValue>100</maxValue>
			<label>Current</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
	</device>

	<!-- MasterSwitch 3 - single phase, with 2 Banks current-->
	<device deviceid="ms3twobankcurrent">
		<oidMustMatch ruleid="sysobjid" oid=".1.3.6.1.2.1.1.2.0">
			<valueList>
				<value>.1.3.6.1.4.1.318.1.3.4.5</value>
				<!-- rPDU -->
				<value>.1.3.6.1.4.1.318.1.3.4.5.*</value>
				<!-- other rPDU -->
			</valueList>
		</oidMustMatch>
		<oidMustMatch ruleid="singlephase" oid=".1.3.6.1.4.1.318.1.1.12.1.9.0">
			<valueList>
				<value>1</value>
			</valueList>
		</oidMustMatch>
		<oidMustMatch ruleid="sPDUNumBanks" oid=".1.3.6.1.4.1.318.1.1.12.2.1.4.0">
			<valueList>
				<value>2</value>
			</valueList>
		</oidMustMatch>

		<numSensor ruleid="current1">
			<type>amperage/output/phase</type>
			<sensorId>BANK_OUTPUT_CURRENT_1</sensorId>
			<value>
				<mult>
					<op>
						<getOid>.1.3.6.1.4.1.318.1.1.12.2.3.1.1.2.2</getOid>
					</op>
					<op>0.1</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<maxValue>100.0</maxValue>
			<label>Current - Bank 1</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
		<numSensor ruleid="current2">
			<type>amperage/output/phase</type>
			<sensorId>BANK_OUTPUT_CURRENT_2</sensorId>
			<value>
				<mult>
					<op>
						<getOid>.1.3.6.1.4.1.318.1.1.12.2.3.1.1.2.3</getOid>
					</op>
					<op>0.1</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<maxValue>100.0</maxValue>
			<label>Current - Bank 2</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
		<numSensor ruleid="current3">
			<type>amperage/output/phase</type>
			<sensorId>TOTAL_BANK_CURRENT</sensorId>
			<value>
				<mult>
					<op>
						<getOid>.1.3.6.1.4.1.318.1.1.12.2.3.1.1.2.1</getOid>
					</op>
					<op>0.1</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<maxValue>100.0</maxValue>
			<label>Total Current</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
	</device>

	<!-- MasterSwitch 3 - 3 phase current -->
	<device deviceid="ms3threephasecurrent">
		<oidMustMatch ruleid="sysobjid" oid=".1.3.6.1.2.1.1.2.0">
			<valueList>
				<value>.1.3.6.1.4.1.318.1.3.4.5</value>
				<!-- rPDU -->
				<value>.1.3.6.1.4.1.318.1.3.4.5.*</value>
				<!-- other rPDU -->
			</valueList>
		</oidMustMatch>
		<oidMustMatch ruleid="threephase" oid=".1.3.6.1.4.1.318.1.1.12.1.9.0">
			<valueList>
				<value>3</value>
				<value>2</value>
			</valueList>
		</oidMustMatch>
		<numSensor ruleid="current" index=".1.3.6.1.4.1.318.1.1.12.2.3.1.1.1">
			<type>amperage/phaseamperage</type>
			<sensorId>OUTPUT_CURRENT_<rowIndex/>
			</sensorId>
			<value>
				<mult>
					<op>
						<getRowOid>.1.3.6.1.4.1.318.1.1.12.2.3.1.1.2</getRowOid>
					</op>
					<op>0.1</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<maxValue>100.0</maxValue>
			<label>Current -<space/>
				<mapValue mapid="apcpower/ms3threephaseva/phaseorbankselect">
					<getOid>.1.3.6.1.4.1.318.1.1.12.2.1.4.0</getOid>
				</mapValue>
				<space/>
				<rowIndex/>
			</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
	</device>

	<!-- Outlet states for switched rPDU devices -->
	<device deviceid="sPDUOutlets">
		<oidMustMatch ruleid="sysobjid" oid=".1.3.6.1.2.1.1.2.0">
			<valueList>
				<value>.1.3.6.1.4.1.318.1.3.4.5</value>
				<!-- rPDU -->
				<value>.1.3.6.1.4.1.318.1.3.4.5.*</value>
				<!-- other rPDU -->
			</valueList>
		</oidMustMatch>
		<oidMustExist ruleid="outletstateindex" oid=".1.3.6.1.4.1.318.1.1.12.3.5.1.1.1" istree="yes"/>
		<oidMustExist ruleid="outletcontrolindex" oid=".1.3.6.1.4.1.318.1.1.12.3.3.1.1.1" istree="yes"/>
		<stateSensor ruleid="outletState" index=".1.3.6.1.4.1.318.1.1.12.3.5.1.1.1">
			<type>state/outletstate</type>
			<sensorId>RPDU_OUTLET_STATE_<rowIndex/>
			</sensorId>
			<value>
				<mapValue mapid="outletValueToState">
					<getRowOid>.1.3.6.1.4.1.318.1.1.12.3.5.1.1.4</getRowOid>
				</mapValue>
			</value>
			<label>
				<getRowOid>.1.3.6.1.4.1.318.1.1.12.3.5.1.1.2</getRowOid>
			</label>
			<enum>outletStateMap</enum>
			<sensorSet>Outlet Status</sensorSet>
		</stateSensor>
		<enumMap ruleid="outletStateMap">
			<label>On</label>
			<label>Off</label>
		</enumMap>
		<valueMap ruleid="outletValueToState">
			<valueIn>1</valueIn>
			<valueOut>0</valueOut>
			<valueIn>2</valueIn>
			<valueOut>1</valueOut>
		</valueMap>	


		<stateControl ruleid="outletcontrol" index=".1.3.6.1.4.1.318.1.1.12.3.3.1.1.1">
			<type>state/outletcontrol</type>
			<controlId>RPDU_OUTLET_CONTROL_<rowIndex/>
			</controlId>

			<!-- referenced during scans -->
			<value>
				<mapValue mapid="outletValueToState">
					<getRowOid>.1.3.6.1.4.1.318.1.1.12.3.3.1.1.4</getRowOid>
				</mapValue>
			</value>

			<!-- referenced during control actions -->
			<set_value>
				<!--<setOid></setOid>-->

				<setRowOid>
					<op>.1.3.6.1.4.1.318.1.1.12.3.3.1.1.4</op>
					<op>
						<mapValue mapid="outletControlToState">
							<setOidValue/>
						</mapValue>
					</op>
				</setRowOid>

			</set_value>

			<label>
				<getRowOid>.1.3.6.1.4.1.318.1.1.12.3.3.1.1.2</getRowOid>
			</label>
			<cntrl_enum>outletControlMap</cntrl_enum>
			<val_enum>outletStateMap</val_enum>
		</stateControl>

		<enumMap ruleid="outletControlMap">
			<label>Immediate On</label>
			<label>Immediate Off</label>
			<label>Immediate Reboot</label>
			<label>Delayed On</label>
			<label>Delayed Off</label>
			<label>Delayed Reboot</label>
			<label>Cancel Pending Command</label>
		</enumMap>

		<valueMap ruleid="outletControlToState">
			<valueIn>0</valueIn>
			<valueOut>1</valueOut>
			<valueIn>1</valueIn>
			<valueOut>2</valueOut>
			<valueIn>2</valueIn>
			<valueOut>3</valueOut>
			<valueIn>3</valueIn>
			<valueOut>4</valueOut>
			<valueIn>4</valueIn>
			<valueOut>5</valueOut>
			<valueIn>5</valueIn>
			<valueOut>6</valueOut>
			<valueIn>6</valueIn>
			<valueOut>7</valueOut>
		</valueMap>	

	</device>
	<device deviceid="sPDUOutletLoads">
		<oidMustMatch ruleid="modelnamematch" oid=".1.3.6.1.4.1.318.1.1.12.1.5.0">
			<valueList>
				<value>AP7867</value>
				<value>AP7867A</value>
				<value>AP7866</value>
				<value>AP7866A</value>
				<value>AP7856</value>
				<value>AP7856A</value>
				<value>AP7856X669</value>
			</valueList>
		</oidMustMatch>
		<oidMustExist ruleid="outletload" oid=".1.3.6.1.4.1.318.1.1.12.3.5.1.1.7" istree="yes"/>
		<numSensor ruleid="current" index=".1.3.6.1.4.1.318.1.1.12.3.5.1.1.1">
			<type>amperage</type>
			<sensorId>OUTLET_CURRENT_<rowIndex/>
			</sensorId>
			<value>
				<mult>
					<op>
						<getRowOid>.1.3.6.1.4.1.318.1.1.12.3.5.1.1.7</getRowOid>
					</op>
					<op>0.1</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<maxValue>100.0</maxValue>
			<label>Current -<space/>
				<getRowOid>.1.3.6.1.4.1.318.1.1.12.3.5.1.1.2</getRowOid>
			</label>
			<sensorSet>Outlet Status</sensorSet>
		</numSensor>
	</device>

	<!-- APC rPDU MIB generic device information - better than discovery at model/serial -->
	<device deviceid="apcrpdudata">
		<oidMustExist ruleid="mib2objidtest" oid=".1.3.6.1.4.1.318.1.1.12.1.5.0"/>

		<suppressRule ruleid="stompdiscmodel" suppressid="core/apcdiscdata/modeldata"/>
		<suppressRule ruleid="stompmib2model" suppressid="core/mib2data/modeldata"/>
		<!-- Replace model data with model from rPDU MIB -->
		<suppressRule ruleid="stompmodel" suppressid="core/mib2data/modeldata"/>
		<setProductData ruleid="modeldata" field="model">
			<getOid>.1.3.6.1.4.1.318.1.1.12.1.5.0</getOid>
		</setProductData>
		<setProductData ruleid="vendordata" field="vendor">American Power Conversion</setProductData>
		<!-- Put serial number in product field -->
		<suppressRule ruleid="stompdiscserialnum" suppressid="core/apcdiscdata/serialnum"/>
		<suppressRule ruleid="stompdiscserialnum2" suppressid="core/apcdiscdata/serialnum2"/>
		<setProductData ruleid="serialnum" field="apc_serial_num">
			<getOid>.1.3.6.1.4.1.318.1.1.12.1.6.0</getOid>
		</setProductData>
		<setProductData ruleid="serialnum2" field="serial_num">
			<getOid>.1.3.6.1.4.1.318.1.1.12.1.6.0</getOid>
		</setProductData>
		<!-- define phase and bank counts for rpdu devices -->
		<setProductData ruleid="inputphasecount" field="inputphasecount">
			<getOid>.1.3.6.1.4.1.318.1.1.12.1.9.0</getOid>
		</setProductData>
		<setProductData ruleid="outputphasecount" field="outputphasecount">
			<getOid>.1.3.6.1.4.1.318.1.1.12.2.1.2.0</getOid>
		</setProductData>
		<!-- assume a single bank, modify later if rPDU has more banks -->
		<setProductData ruleid="bankcount" field="bankcount">1</setProductData>
	</device>
	<device deviceid="apcrpdubankdata1p">
		<oidMustMatch ruleid="sysobjid" oid=".1.3.6.1.2.1.1.2.0">
			<valueList>
				<value>.1.3.6.1.4.1.318.1.3.4.5</value>
				<!-- rPDU gen1 -->
				<value>.1.3.6.1.4.1.318.1.3.4.5.*</value>
				<!-- other rPDU gen1 -->
				<value>.1.3.6.1.4.1.318.1.3.4.6</value>
				<!-- rPDU gen2 -->
				<value>.1.3.6.1.4.1.318.1.3.4.6.*</value>
				<!-- other rPDU gen2 -->
				<value>.1.3.6.1.4.1.318.1.3.4.7</value>
				<!-- sPDU -->
				<value>.1.3.6.1.4.1.318.1.3.4.7.*</value>
				<!-- other sPDU -->
				<value>.1.3.6.1.4.1.318.1.3.4.8</value>
				<!-- rPDU B -->
				<value>.1.3.6.1.4.1.318.1.3.4.8.*</value>
				<!-- other rPDU B -->
			</valueList>
		</oidMustMatch>
		<oidMustMatch ruleid="singlephasetest" oid=".1.3.6.1.4.1.318.1.1.12.2.1.2.0">
			<valueList>
				<value>1</value>
			</valueList>
		</oidMustMatch>
		<oidMustNotMatch ruleid="multibanktest" oid=".1.3.6.1.4.1.318.1.1.12.2.1.4.0">
			<valueList>
				<value>0</value>
			</valueList>
		</oidMustNotMatch>
		<suppressRule ruleid="stopmbankcount" suppressid="apcpower/apcrpdudata/bankcount"/>
		<setProductData ruleid="bankcount" field="bankcount">
			<getOid>.1.3.6.1.4.1.318.1.1.12.2.1.4.0</getOid>
		</setProductData>
	</device>

	<!-- APC xPDU MIB generic device information - better than discovery at model/serial -->
	<device deviceid="apcxpdudata">
		<oidMustExist ruleid="mib2objidtest" oid=".1.3.6.1.4.1.318.1.1.15.1.7.0"/>

		<suppressRule ruleid="stompdiscmodel" suppressid="core/apcdiscdata/modeldata"/>
		<suppressRule ruleid="stompmib2model" suppressid="core/mib2data/modeldata"/>
		<!-- Replace model data with model from xPDU MIB -->
		<suppressRule ruleid="stompmodel" suppressid="core/mib2data/modeldata"/>
		<setProductData ruleid="modeldata" field="model">
			<getOid>.1.3.6.1.4.1.318.1.1.15.1.7.0</getOid>
		</setProductData>
		<setProductData ruleid="vendordata" field="vendor">American Power Conversion</setProductData>
		<!-- Put serial number in product field -->
		<suppressRule ruleid="stompdiscserialnum" suppressid="core/apcdiscdata/serialnum"/>
		<suppressRule ruleid="stompdiscserialnum2" suppressid="core/apcdiscdata/serialnum2"/>
		<setProductData ruleid="serialnum" field="apc_serial_num">
			<getOid>.1.3.6.1.4.1.318.1.1.15.1.8.0</getOid>
		</setProductData>
		<setProductData ruleid="serialnum2" field="serial_num">
			<getOid>.1.3.6.1.4.1.318.1.1.15.1.8.0</getOid>
		</setProductData>
		<!-- define number of phases for xpdu devices -->
		<setProductData ruleid="inputphasecount" field="inputphasecount">3</setProductData>
		<setProductData ruleid="outputphasecount" field="outputphasecount">3</setProductData>
	</device>

	<!-- APC sPDU MIB generic device information - better than discovery at model/serial -->
	<device deviceid="apcspdudata">
		<oidMustExist ruleid="mib2objidtest" oid=".1.3.6.1.4.1.318.1.1.4.1.4.0"/>
		<oidMustNotExist ruleid="mib2objidtest2" oid=".1.3.6.1.4.1.318.1.1.12.1.5.0"/>
		<suppressRule ruleid="stompdiscmodel" suppressid="core/apcdiscdata/modeldata"/>
		<suppressRule ruleid="stompmib2model" suppressid="core/mib2data/modeldata"/>
		<!-- Replace model data with model from xPDU MIB -->
		<suppressRule ruleid="stompmodel" suppressid="core/mib2data/modeldata"/>
		<setProductData ruleid="modeldata" field="model">
			<getOid>.1.3.6.1.4.1.318.1.1.4.1.4.0</getOid>
		</setProductData>
		<setProductData ruleid="vendordata" field="vendor">American Power Conversion</setProductData>
		<!-- Put serial number in product field -->
		<suppressRule ruleid="stompdiscserialnum" suppressid="core/apcdiscdata/serialnum"/>
		<suppressRule ruleid="stompdiscserialnum2" suppressid="core/apcdiscdata/serialnum2"/>
		<setProductData ruleid="serialnum" field="apc_serial_num">
			<getOid>.1.3.6.1.4.1.318.1.1.4.1.5.0</getOid>
		</setProductData>
		<setProductData ruleid="serialnum2" field="serial_num">
			<getOid>.1.3.6.1.4.1.318.1.1.4.1.5.0</getOid>
		</setProductData>
		<!-- define number of phases and banks for masterswitch v1 and v2 devices -->
		<setProductData ruleid="inputphasecount" field="inputphasecount">1</setProductData>
		<setProductData ruleid="outputphasecount" field="outputphasecount">1</setProductData>
	</device>
	<!-- MSV1 Outlet States -->
	<device deviceid="masterswitchv1v2_states">
		<oidMustMatch ruleid="mibobjidtest" oid=".1.3.6.1.2.1.1.2.0">
			<valueList>
				<value>.1.3.6.1.4.1.318.1.3.4.1</value>
				<!-- MSV1 -->
				<value>.1.3.6.1.4.1.318.1.3.4.1.*</value>
				<!-- MSV1 children -->
				<value>.1.3.6.1.4.1.318.1.3.4.2</value>
				<!-- MSV2 -->
				<value>.1.3.6.1.4.1.318.1.3.4.2.*</value>
				<!-- MSV2 children -->
			</valueList>
		</oidMustMatch>
		<stateSensor ruleid="msv1_outletstate" index=".1.3.6.1.4.1.318.1.1.4.4.2.1.1">
			<type>state/msv1v2outletstate</type>
			<sensorId>MSV1V2_OUTLET_STATE_<rowIndex/>
			</sensorId>
			<value>
				<mapValue mapid="MSV1V2outletValueToState">
					<getRowOid>.1.3.6.1.4.1.318.1.1.4.4.2.1.3</getRowOid>
				</mapValue>
			</value>
			<label>Outlet<space/>
				<getRowOid>.1.3.6.1.4.1.318.1.1.4.4.2.1.1</getRowOid>
				<space/>(<getRowOid>.1.3.6.1.4.1.318.1.1.4.4.2.1.4</getRowOid>)</label>
			<enum>outletStateMap</enum>
			<sensorSet>Outlet Status</sensorSet>
		</stateSensor>
		<valueMap ruleid="MSV1V2outletValueToState">
			<valueIn>1</valueIn>
			<valueOut>0</valueOut>
			<valueIn>2</valueIn>
			<valueOut>1</valueOut>
			<valueIn>3</valueIn>
			<valueOut>2</valueOut>
			<valueIn>4</valueIn>
			<valueOut>3</valueOut>
			<valueIn>5</valueIn>
			<valueOut>4</valueOut>
			<valueIn>6</valueIn>
			<valueOut>5</valueOut>
			<valueIn>7</valueIn>
			<valueOut>6</valueOut>
			<valueIn>*</valueIn>
			<valueOut>3</valueOut>
		</valueMap>
		<enumMap ruleid="outletStateMap">
			<label>On</label>
			<label>Off</label>
			<label>Reboot</label>
			<label>Unknown</label>
			<label>On With Delay</label>
			<label>Off With Delay</label>
			<label>Reboot With Delay</label>
		</enumMap>
	</device>
	<device deviceid="masterswitchvm_states">
		<oidMustMatch ruleid="mibobjidtest" oid=".1.3.6.1.2.1.1.2.0">
			<valueList>
				<value>.1.3.6.1.4.1.318.1.3.4.3</value>
				<!-- MSVM -->
				<value>.1.3.6.1.4.1.318.1.3.4.3.*</value>
				<!-- MSVM children -->
			</valueList>
		</oidMustMatch>
		<!-- define number of phases and banks for masterswitch vm devices -->
		<setProductData ruleid="inputphasecount" field="inputphasecount">1</setProductData>
		<setProductData ruleid="outputphasecount" field="outputphasecount">1</setProductData>
		<setProductData ruleid="serialnum" field="apc_serial_num">
			<substring start="113" end="125">
				<getOid>.1.3.6.1.2.1.1.1.0</getOid>
			</substring>
		</setProductData>
		<setProductData ruleid="serialnum2" field="serial_num">
			<substring start="113" end="125">
				<getOid>.1.3.6.1.2.1.1.1.0</getOid>
			</substring>
		</setProductData>
		<stateSensor ruleid="msvm_outletstate" index=".1.3.6.1.4.1.318.1.1.5.7.1.1.3">
			<type>state/msvmoutletstate</type>
			<sensorId>MSVM_OUTLET_STATE_<rowIndex/>
			</sensorId>
			<value>
				<mapValue mapid="MSVMoutletValueToState">
					<getRowOid>.1.3.6.1.4.1.318.1.1.5.7.1.1.5</getRowOid>
				</mapValue>
			</value>
			<label>MSVM<getRowOid>.1.3.6.1.4.1.318.1.1.5.7.1.1.1</getRowOid>
				<space/>Outlet<space/>
				<getRowOid>.1.3.6.1.4.1.318.1.1.5.7.1.1.3</getRowOid>
				<space/>(<getRowOid>.1.3.6.1.4.1.318.1.1.5.7.1.1.4</getRowOid>)</label>
			<enum>outletStateMap</enum>
			<sensorSet>Outlet Status</sensorSet>
		</stateSensor>
		<valueMap ruleid="MSVMoutletValueToState">
			<valueIn>1</valueIn>
			<valueOut>0</valueOut>
			<valueIn>2</valueIn>
			<valueOut>1</valueOut>
			<valueIn>*</valueIn>
			<valueOut>2</valueOut>
		</valueMap>
		<enumMap ruleid="outletStateMap">
			<label>On</label>
			<label>Off</label>
			<label>Unknown</label>
		</enumMap>
		<numSensor ruleid="msvm_total_output_current" index="1.3.6.1.4.1.318.1.1.5.4.2.1.1">
			<type>amperage</type>
			<sensorId>OUTPUT_CURRENT_TOTAL_<rowIndex/>
			</sensorId>
			<value>
				<mult>
					<op>0.01</op>
					<op>
						<mult>
							<op>
								<getRowOid>.1.3.6.1.4.1.318.1.1.5.4.2.1.6</getRowOid>
							</op>
							<op>
								<getRowOid>.1.3.6.1.4.1.318.1.1.5.4.2.1.7</getRowOid>
							</op>
						</mult>
					</op>
				</mult>
			</value>
			<label>MSVM<getRowOid>.1.3.6.1.4.1.318.1.1.5.4.2.1.1</getRowOid>
				<space/>Output Current</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
	</device>
	<device deviceid="masterswitchmsp_states">
		<oidMustMatch ruleid="mibobjidtest" oid=".1.3.6.1.2.1.1.2.0">
			<valueList>
				<value>.1.3.6.1.4.1.318.1.3.4.4</value>
				<!-- MSMSP -->
				<value>.1.3.6.1.4.1.318.1.3.4.4.*</value>
				<!-- MSMSP children -->
			</valueList>
		</oidMustMatch>
		<!-- define number of phases and banks for masterswitch plus devices -->
		<setProductData ruleid="inputphasecount" field="inputphasecount">1</setProductData>
		<setProductData ruleid="outputphasecount" field="outputphasecount">1</setProductData>
		<stateSensor ruleid="msmsp_outletstate" index=".1.3.6.1.4.1.318.1.1.6.7.1.1.3">
			<type>state/msvmoutletstate</type>
			<sensorId>MSMSP_OUTLET_STATE_<rowIndex/>
			</sensorId>
			<value>
				<mapValue mapid="MSMSPoutletValueToState">
					<getRowOid>.1.3.6.1.4.1.318.1.1.6.7.1.1.5</getRowOid>
				</mapValue>
			</value>
			<label>Outlet<space/>
				<getRowOid>.1.3.6.1.4.1.318.1.1.6.7.1.1.3</getRowOid>
				<space/>(<getRowOid>.1.3.6.1.4.1.318.1.1.6.7.1.1.4</getRowOid>)</label>
			<enum>outletStateMap</enum>
			<sensorSet>Outlet Status</sensorSet>
		</stateSensor>
		<valueMap ruleid="MSMSPoutletValueToState">
			<valueIn>1</valueIn>
			<valueOut>0</valueOut>
			<valueIn>2</valueIn>
			<valueOut>1</valueOut>
			<valueIn>*</valueIn>
			<valueOut>2</valueOut>
		</valueMap>
		<enumMap ruleid="outletStateMap">
			<label>On</label>
			<label>Off</label>
			<label>Unknown</label>
		</enumMap>
	</device>
	<device deviceid="rpdu2_ident">
		<oidMustMatch ruleid="sysobjid" oid=".1.3.6.1.2.1.1.2.0">
			<valueList>
				<value>.1.3.6.1.4.1.318.1.3.4.6</value>
				<!-- rPDU gen2 -->
				<value>.1.3.6.1.4.1.318.1.3.4.6.*</value>
				<!-- other rPDU gen2 -->
				<value>.1.3.6.1.4.1.318.1.3.4.7</value>
				<!-- sPDU -->
				<value>.1.3.6.1.4.1.318.1.3.4.7.*</value>
				<!-- other sPDU -->
				<value>.1.3.6.1.4.1.318.1.3.4.8</value>
				<!-- rPDU B -->
				<value>.1.3.6.1.4.1.318.1.3.4.8.*</value>
				<!-- other rPDU B -->
			</valueList>
		</oidMustMatch>
		<suppressRule ruleid="stomptype" suppressid="core/mib2data/typedata"/>
		<setProductData ruleid="typedata" field="type">Rack PDU</setProductData>
		<suppressRule ruleid="stompinputphasecount" suppressid="apcpower/apcrpdudata/inputphasecount"/>
		<setProductData ruleid="inputphasecount" field="inputphasecount">
			<getOid>.1.3.6.1.4.1.318.1.1.26.4.2.1.7.1</getOid>
		</setProductData>
		<!-- rpdu2 total power -->

		<valueMap ruleid="rpdu2ident-vm">
			<valueIn>-1</valueIn>
			<valueOut>[false]</valueOut>
			<valueIn>*</valueIn>
			<valueOut>[true]</valueOut>
		</valueMap>

		<numSensor ruleid="rpdu2_total_power" index=".1.3.6.1.4.1.318.1.1.26.4.3.1.1">
			<rowTest>
				<mapValue mapid="rpdu2ident-vm">
					<getRowOid>.1.3.6.1.4.1.318.1.1.26.4.3.1.5</getRowOid>
				</mapValue>
			</rowTest>
			<type>powerW</type>
			<sensorId>OUTPUT_POWER_TOTAL_<rowIndex/>
			</sensorId>
			<value>
				<mult>
					<op>10</op>
					<op>
						<getRowOid>.1.3.6.1.4.1.318.1.1.26.4.3.1.5</getRowOid>
					</op>
				</mult>
			</value>
			<label>
				<if>
					<op>
						<neq>
							<op>
								<getOid>.1.3.6.1.4.1.318.1.1.26.3.0</getOid>
							</op>
							<op>1</op>
						</neq>
					</op>
					<op>Device <getRowOid>.1.3.6.1.4.1.318.1.1.26.4.3.1.2</getRowOid>
						<space/>(<getRowOid>.1.3.6.1.4.1.318.1.1.26.4.3.1.3</getRowOid>)<space/>-<space/>
					</op>
					<op/>
				</if>
				Total Real Power
			</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>


		<!-- rpdu2 total energy -->
		<numSensor ruleid="rpdu2_total_energy" index=".1.3.6.1.4.1.318.1.1.26.4.3.1.1">
			<rowTest>
				<mapValue mapid="rpdu2ident-vm">
					<getRowOid>.1.3.6.1.4.1.318.1.1.26.4.3.1.9</getRowOid>
				</mapValue>
			</rowTest>
			<type>num/kwatthr</type>
			<sensorId>OUTPUT_ENERGY_TOTAL_<rowIndex/>
			</sensorId>
			<value>
				<mult>
					<op>0.1</op>
					<op>
						<getRowOid>.1.3.6.1.4.1.318.1.1.26.4.3.1.9</getRowOid>
					</op>
				</mult>
			</value>
			<label>
				<if>
					<op>
						<neq>
							<op>
								<getOid>.1.3.6.1.4.1.318.1.1.26.3.0</getOid>
							</op>
							<op>1</op>
						</neq>
					</op>
					<op>Device <getRowOid>.1.3.6.1.4.1.318.1.1.26.4.3.1.2</getRowOid>
						<space/>(<getRowOid>.1.3.6.1.4.1.318.1.1.26.4.3.1.3</getRowOid>)<space/>-<space/>
					</op>
					<op/>
				</if>
				Total Energy Used
			</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>


		<numSensor ruleid="rpdu2_apparent_power" index=".1.3.6.1.4.1.318.1.1.26.4.3.1.1">
			<rowTest>
				<mapValue mapid="rpdu2ident-vm">
					<getRowOid>.1.3.6.1.4.1.318.1.1.26.4.3.1.16</getRowOid>
				</mapValue>
			</rowTest>
			<type>num/powerKVA</type>
			<sensorId>OUTPUT_APPARENT_POWER_<rowIndex/>
			</sensorId>
			<value>
				<mult>
					<op>0.01</op>
					<op>
						<getRowOid>.1.3.6.1.4.1.318.1.1.26.4.3.1.16</getRowOid>
					</op>
				</mult>
			</value>
			<valueInc>0.01</valueInc>
			<label>
				<if>
					<op>
						<neq>
							<op>
								<getOid>.1.3.6.1.4.1.318.1.1.26.3.0</getOid>
							</op>
							<op>1</op>
						</neq>
					</op>
					<op>Device <getRowOid>.1.3.6.1.4.1.318.1.1.26.4.3.1.2</getRowOid>
						<space/>(<getRowOid>.1.3.6.1.4.1.318.1.1.26.4.3.1.3</getRowOid>)<space/>-<space/>
					</op>
					<op/>
				</if>
				Total Apparent Power
			</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>


		<numSensor ruleid="rpdu2_power_factor" index=".1.3.6.1.4.1.318.1.1.26.4.3.1.1">
			<rowTest>
				<mapValue mapid="rpdu2ident-vm">
					<getRowOid>.1.3.6.1.4.1.318.1.1.26.4.3.1.17</getRowOid>
				</mapValue>
			</rowTest>
			<type>num/powerfactor</type>
			<sensorId>OUTPUT_POWER_FACTOR_TOTAL_<rowIndex/>
			</sensorId>
			<value>
				<mult>
					<op>0.01</op>
					<op>
						<getRowOid>.1.3.6.1.4.1.318.1.1.26.4.3.1.17</getRowOid>
					</op>
				</mult>
			</value>
			<valueInc>0.01</valueInc>
			<label>
				<if>
					<op>
						<neq>
							<op>
								<getOid>.1.3.6.1.4.1.318.1.1.26.3.0</getOid>
							</op>
							<op>1</op>
						</neq>
					</op>
					<op>Device <getRowOid>.1.3.6.1.4.1.318.1.1.26.4.3.1.2</getRowOid>
						<space/>(<getRowOid>.1.3.6.1.4.1.318.1.1.26.4.3.1.3</getRowOid>)<space/>-<space/>
					</op>
					<op/>
				</if>
				Power Factor
			</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
	</device>
	<device deviceid="rpdu2_3P_output">
		<oidMustMatch ruleid="sysobjid" oid=".1.3.6.1.2.1.1.2.0">
			<valueList>
				<value>.1.3.6.1.4.1.318.1.3.4.6</value>
				<!-- rPDU gen2 -->
				<value>.1.3.6.1.4.1.318.1.3.4.6.*</value>
				<!-- other rPDU gen2 -->
				<value>.1.3.6.1.4.1.318.1.3.4.7</value>
				<!-- sPDU gen2 -->
				<value>.1.3.6.1.4.1.318.1.3.4.7.*</value>
				<!-- other sPDU -->
			</valueList>
		</oidMustMatch>
		<oidMustExist ruleid="rpdu2_phase_exists" oid=".1.3.6.1.4.1.318.1.1.12.2.1.2.0"/>
		<oidMustNotMatch ruleid="rpdu2_phase_table_size" oid=".1.3.6.1.4.1.318.1.1.12.2.1.2.0">
			<valueList>
				<value>0</value>
			</valueList>
		</oidMustNotMatch>
		<suppressRule ruleid="stompoutputphasecount" suppressid="apcpower/apcrpdudata/outputphasecount"/>
		<setProductData ruleid="outputphasecount" field="outputphasecount">
			<getOid>.1.3.6.1.4.1.318.1.1.12.2.1.2.0</getOid>
		</setProductData>

		<!--<setProductData ruleid="outputs" field="outputphasecount">3</setProductData>-->
		<setProductData ruleid="bankcount" field="bankcount">
			<getOid>.1.3.6.1.4.1.318.1.1.12.2.1.4.0</getOid>
		</setProductData>

		<!-- rpdu 1P power (provided in tenths of kW) -->
		<numSensor ruleid="rpdu2_3P_power" index=".1.3.6.1.4.1.318.1.1.26.6.3.1.1">
			<rowTest>
				<gt>
					<op>
						<getRowOid>.1.3.6.1.4.1.318.1.1.26.6.3.1.7</getRowOid>
					</op>
					<op>-1</op>
				</gt>
			</rowTest>
			<type>powerW</type>
			<sensorId>RPDU_PHASE_OUTPUT_POWER_<rowIndex/>
			</sensorId>
			<value>
				<mult>
					<op>10</op>
					<op>
						<getRowOid>.1.3.6.1.4.1.318.1.1.26.6.3.1.7</getRowOid>
					</op>
				</mult>
			</value>
			<minValue>0.0</minValue>
			<label>
				<if>
					<op>
						<neq>
							<op>
								<getOid>.1.3.6.1.4.1.318.1.1.26.3.0</getOid>
							</op>
							<op>1</op>
						</neq>
					</op>
					<op>Device <getRowOid>.1.3.6.1.4.1.318.1.1.26.6.3.1.2</getRowOid>
						<space/>-<space/>
					</op>
					<op/>
				</if>
				Power, Phase<space/>
				<getRowOid>.1.3.6.1.4.1.318.1.1.26.6.3.1.3</getRowOid>
				<space/>
			</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
		<numSensor ruleid="rpdu2_3P_voltage" index=".1.3.6.1.4.1.318.1.1.26.6.3.1.1">
			<rowTest>
				<gt>
					<op>
						<getRowOid>.1.3.6.1.4.1.318.1.1.26.6.3.1.6</getRowOid>
					</op>
					<op>-1</op>
				</gt>
			</rowTest>
			<type>voltageAC</type>
			<sensorId>RPDU_PHASE_OUTPUT_VOLTAGE_<rowIndex/>
			</sensorId>
			<value>
				<getRowOid>.1.3.6.1.4.1.318.1.1.26.6.3.1.6</getRowOid>
			</value>
			<label>
				<if>
					<op>
						<neq>
							<op>
								<getOid>.1.3.6.1.4.1.318.1.1.26.3.0</getOid>
							</op>
							<op>1</op>
						</neq>
					</op>
					<op>Device <getRowOid>.1.3.6.1.4.1.318.1.1.26.6.3.1.2</getRowOid>
						<space/>-<space/>
					</op>
					<op/>
				</if>
				Voltage, Phase<space/>
				<getRowOid>.1.3.6.1.4.1.318.1.1.26.6.3.1.3</getRowOid>
				<space/>
			</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
		<numSensor ruleid="rpdu2_3P_current" index=".1.3.6.1.4.1.318.1.1.26.6.3.1.1">
			<type>amperage</type>
			<sensorId>RPDU_PHASE_OUTPUT_CURRENT_<rowIndex/>
			</sensorId>
			<value>
				<mult>
					<op>0.1</op>
					<op>
						<getRowOid>.1.3.6.1.4.1.318.1.1.26.6.3.1.5</getRowOid>
					</op>
				</mult>
			</value>
			<label>
				<if>
					<op>
						<neq>
							<op>
								<getOid>.1.3.6.1.4.1.318.1.1.26.3.0</getOid>
							</op>
							<op>1</op>
						</neq>
					</op>
					<op>Device <getRowOid>.1.3.6.1.4.1.318.1.1.26.6.3.1.2</getRowOid>
						<space/>-<space/>
					</op>
					<op/>
				</if>
				Current, Phase<space/>
				<getRowOid>.1.3.6.1.4.1.318.1.1.26.6.3.1.3</getRowOid>
				<space/>
			</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
		<numSensor ruleid="rpdu2_3P_apparentPower" index=".1.3.6.1.4.1.318.1.1.26.6.3.1.1">
			<type>powerVA</type>
			<sensorId>RPDU_OUTPUT_APPARENT_POWER_<rowIndex/></sensorId>
			<value>
				<mult>
					<op>10</op>
					<op><getRowOid>.1.3.6.1.4.1.318.1.1.26.6.3.1.8</getRowOid></op>
				</mult>
			</value>
			<label>
				<if>
					<op>
						<neq>
						<op><getOid>.1.3.6.1.4.1.318.1.1.26.3.0</getOid></op>
						<op>1</op>
						</neq>
					</op>
					<op>Device <getRowOid>.1.3.6.1.4.1.318.1.1.26.6.3.1.2</getRowOid><space/>-<space/>
					</op><op/>
				</if>
				Apparent Power, Phase<space/>
				<getRowOid>.1.3.6.1.4.1.318.1.1.26.6.3.1.3</getRowOid>
				<space/>
			</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
	</device>

	<device deviceid="rpdu2_bank_output">
		<oidMustMatch ruleid="sysobjid" oid=".1.3.6.1.2.1.1.2.0">
			<valueList>
				<value>.1.3.6.1.4.1.318.1.3.4.6</value>
				<!-- rPDU gen2 -->
				<value>.1.3.6.1.4.1.318.1.3.4.6.*</value>
				<!-- other rPDU gen2 -->
				<value>.1.3.6.1.4.1.318.1.3.4.7</value>
				<!-- sPDU gen2 -->
				<value>.1.3.6.1.4.1.318.1.3.4.7.*</value>
				<!-- other sPDU -->
			</valueList>
		</oidMustMatch>
		<oidMustExist ruleid="rpdu2_banks_exist" oid=".1.3.6.1.4.1.318.1.1.26.7.0"/>
		<oidMustNotMatch ruleid="rpdu2_bank_table_size" oid=".1.3.6.1.4.1.318.1.1.26.7.0">
			<valueList>
				<value>0</value>
			</valueList>
		</oidMustNotMatch>

		<numSensor ruleid="rpdu2_bank_current" index=".1.3.6.1.4.1.318.1.1.26.8.3.1.1">
			<type>amperage</type>
			<sensorId>RPDU_BANK_OUTPUT_CURRENT_<rowIndex/>
			</sensorId>
			<value>
				<mult>
					<op>0.1</op>
					<op>
						<getRowOid>.1.3.6.1.4.1.318.1.1.26.8.3.1.5</getRowOid>
					</op>
				</mult>
			</value>
			<label>
				<if>
					<op>
						<neq>
							<op>
								<getOid>.1.3.6.1.4.1.318.1.1.26.3.0</getOid>
							</op>
							<op>1</op>
						</neq>
					</op>
					<op>Device <getRowOid>.1.3.6.1.4.1.318.1.1.26.8.3.1.2</getRowOid>
						<space/>-<space/>
					</op>
					<op/>
				</if>
				Current, Bank<space/>
				<getRowOid>.1.3.6.1.4.1.318.1.1.26.8.3.1.3</getRowOid>
				<space/>
			</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>

		<numSensor ruleid="rpdu2_bank_phase_power" index=".1.3.6.1.4.1.318.1.1.26.8.3.1.1">
			<rowTest>
				<and>
					<op>

						<gt>
							<op>
								<getRowOid default="0">.1.3.6.1.4.1.318.1.1.26.6.3.1.6</getRowOid>
							</op>
							<op>-1</op>
						</gt>

					</op>
					<op>

						<mapValue mapid="bankphaseLtoNmap">
							<!-- Bank Phase Layout -->
							<getRowOid>.1.3.6.1.4.1.318.1.1.26.8.2.1.4</getRowOid>
						</mapValue>

					</op>
				</and>
			</rowTest>
			<type>powerW</type>
			<sensorId>RPDU_OUTPUT_POWER_BANK_<rowIndex/>
			</sensorId>
			<value>
				<mult>
					<op>
						<mult>
							<op>0.1</op>
							<op>
								<getRowOid>.1.3.6.1.4.1.318.1.1.26.8.3.1.5</getRowOid>
							</op>
						</mult>
					</op>
					<op><!-- voltage * PF -->
						<mult>
							<!-- Get Phase voltage based on phase bank layout -->
							<op><getOid>.1.3.6.1.4.1.318.1.1.26.6.3.1.6.<getRowOid>.1.3.6.1.4.1.318.1.1.26.8.2.1.4</getRowOid></getOid></op>
							<op>
								<mult>
									<op>0.01</op>
									<op>
										<getOid>.1.3.6.1.4.1.318.1.1.26.4.3.1.17.<getRowOid>.1.3.6.1.4.1.318.1.1.26.8.2.1.4</getRowOid></getOid>
									</op>
								</mult>
							</op>
						</mult>
					</op>
				</mult>
			</value>
			<label>
				<if>
					<op>
						<neq>
							<op>
								<getOid>.1.3.6.1.4.1.318.1.1.26.3.0</getOid>
							</op>
							<op>1</op>
						</neq>
					</op>
					<op>Device <getRowOid>.1.3.6.1.4.1.318.1.1.26.8.3.1.2</getRowOid>
						<space/>-<space/>
					</op>
					<op/>
				</if>
				Power, Bank<space/>
				<getRowOid>.1.3.6.1.4.1.318.1.1.26.8.3.1.3</getRowOid>
				<space/>
			</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>

		<valueMap ruleid="bankphaseLtoNmap">
			<valueIn>1</valueIn>
			<valueOut>[true]</valueOut>
			<valueIn>2</valueIn>
			<valueOut>[true]</valueOut>
			<valueIn>3</valueIn>
			<valueOut>[true]</valueOut>
			<valueIn>*</valueIn>
			<valueOut>[false]</valueOut>
		</valueMap>
		<numSensor ruleid="rpdu2_bank_line_power" index=".1.3.6.1.4.1.318.1.1.26.8.3.1.1">
			<rowTest>
				<and>
					<op>

						<gt>
							<op>
								<getRowOid>.1.3.6.1.4.1.318.1.1.26.6.3.1.6</getRowOid>
							</op>
							<op>-1</op>
						</gt>

					</op>
					<op>

						<mapValue mapid="bankphaseLtoLmap">
							<!-- Bank Phase Layout -->
							<getRowOid>.1.3.6.1.4.1.318.1.1.26.8.2.1.4</getRowOid>
						</mapValue>

					</op>
				</and>
			</rowTest>
			<type>powerW</type>
			<sensorId>RPDU_OUTPUT_POWER_BANK_<rowIndex/>
			</sensorId>
			<value>
				<mult>
					<op>
						<mult>
							<!--  sqrt(3)*(scale factor for amps)  -->
							<op>0.1732</op>
							<op>
								<getRowOid>.1.3.6.1.4.1.318.1.1.26.8.3.1.5</getRowOid>
							</op>
						</mult>
					</op>
					<op>
						<!-- Get Phase voltage based on phase bank layout -->
						<getOid>.1.3.6.1.4.1.318.1.1.26.6.3.1.6.
							<mapValue mapid="layouttophase">
								<getRowOid>.1.3.6.1.4.1.318.1.1.26.8.2.1.4</getRowOid>
							</mapValue>
						</getOid>
					</op>
				</mult>
			</value>
			<label>
				<if>
					<op>
						<neq>
							<op>
								<getOid>.1.3.6.1.4.1.318.1.1.26.3.0</getOid>
							</op>
							<op>1</op>
						</neq>
					</op>
					<op>Device <getRowOid>.1.3.6.1.4.1.318.1.1.26.8.3.1.2</getRowOid>
						<space/>-<space/>
					</op>
					<op/>
				</if>
				Power, Bank <getRowOid>.1.3.6.1.4.1.318.1.1.26.8.3.1.3</getRowOid>
				<space/>
			</label>
			<sensorSet>System Output</sensorSet>
		</numSensor>
		<valueMap ruleid="bankphaseLtoLmap">
			<valueIn>4</valueIn>
			<valueOut>[true]</valueOut>
			<valueIn>5</valueIn>
			<valueOut>[true]</valueOut>
			<valueIn>6</valueIn>
			<valueOut>[true]</valueOut>
			<valueIn>*</valueIn>
			<valueOut>[false]</valueOut>
		</valueMap>
		<valueMap ruleid="layouttophase">
			<valueIn>4</valueIn>
			<valueOut>1</valueOut>
			<valueIn>5</valueIn>
			<valueOut>2</valueOut>
			<valueIn>6</valueIn>
			<valueOut>3</valueOut>
		</valueMap>
	</device>
	<device deviceid="rpdu2_switched_outlet_states">
		<oidMustMatch ruleid="sysobjid" oid=".1.3.6.1.2.1.1.2.0">
			<valueList>
				<value>.1.3.6.1.4.1.318.1.3.4.6</value>
				<!-- rPDU gen2 -->
				<value>.1.3.6.1.4.1.318.1.3.4.6.*</value>
				<!-- other rPDU gen2 -->
				<value>.1.3.6.1.4.1.318.1.3.4.8</value>
				<!-- rPDU B -->
				<value>.1.3.6.1.4.1.318.1.3.4.8.*</value>
				<!-- other rPDU B -->
			</valueList>
		</oidMustMatch>
		<oidMustExist ruleid="rpdu2_switched_outlet_oid" oid=".1.3.6.1.4.1.318.1.1.26.9.1.0"/>
		<oidMustNotMatch ruleid="rpdu_switched_outlet_count" oid=".1.3.6.1.4.1.318.1.1.26.9.1.0">
			<valueList>
				<value>0</value>
			</valueList>
		</oidMustNotMatch>
		<stateSensor ruleid="rpdu2_outlet_state" index=".1.3.6.1.4.1.318.1.1.26.9.2.4.1.1">
			<type>state/switched_outlet_state</type>
			<sensorId>RPDU_OUTLET_STATE_<rowIndex/>
			</sensorId>
			<value>
				<mapValue mapid="rpdu_outlet_state_map">
					<getRowOid>.1.3.6.1.4.1.318.1.1.26.9.2.4.1.5</getRowOid>
				</mapValue>
			</value>
			<label>
				<if>
					<op>
						<neq>
							<op>
								<getOid>.1.3.6.1.4.1.318.1.1.26.3.0</getOid>
							</op>
							<op>1</op>
						</neq>
					</op>
					<op>Device <getRowOid>.1.3.6.1.4.1.318.1.1.26.9.2.4.1.2</getRowOid>
						<space/>-<space/>
					</op>
					<op/>
				</if>
				State, <getRowOid>.1.3.6.1.4.1.318.1.1.26.9.2.4.1.3</getRowOid>
				<space/>
			</label>
			<enum>rpdu_outlet_states</enum>
			<sensorSet>Outlet Status</sensorSet>
		</stateSensor>
		<enumMap ruleid="rpdu_outlet_states">
			<label>On</label>
			<label>Off</label>
			<label>Reboot</label>
			<label>Unknown</label>
			<label>On With Delay</label>
			<label>Off With Delay</label>
			<label>Reboot With Delay</label>
		</enumMap>
		<valueMap ruleid="rpdu_outlet_state_map">
			<valueIn>1</valueIn>
			<valueOut>0</valueOut>
			<valueIn>2</valueIn>
			<valueOut>1</valueOut>
			<valueIn>3</valueIn>
			<valueOut>2</valueOut>
			<valueIn>4</valueIn>
			<valueOut>3</valueOut>
			<valueIn>5</valueIn>
			<valueOut>4</valueOut>
			<valueIn>6</valueIn>
			<valueOut>5</valueOut>
			<valueIn>7</valueIn>
			<valueOut>6</valueOut>
			<valueIn>*</valueIn>
			<valueOut>3</valueOut>
		</valueMap>
		<stateControl ruleid="outletcontrol" index=".1.3.6.1.4.1.318.1.1.26.9.2.4.1.1">
			<type>state/outletcontrol</type>
			<controlId>RPDU_OUTLET_CONTROL_<rowIndex/>
			</controlId>
			<!-- referenced during scans -->
			<value>
				<mapValue mapid="rpdu_outlet_state_map">
					<getRowOid>.1.3.6.1.4.1.318.1.1.26.9.2.4.1.5</getRowOid>
				</mapValue>
			</value>
			<!-- referenced during control actions -->
			<set_value>
				<!--<setOid></setOid>-->
				<setRowOid>
					<op>.1.3.6.1.4.1.318.1.1.26.9.2.4.1.5</op>
					<op>
						<mapValue mapid="outletControlToState">
							<setOidValue/>
						</mapValue>
					</op>
				</setRowOid>
			</set_value>
			<label>
				<if>
					<op>
						<neq>
							<op>
								<getOid>.1.3.6.1.4.1.318.1.1.26.3.0</getOid>
							</op>
							<op>1</op>
						</neq>
					</op>
					<op>Device <getRowOid>.1.3.6.1.4.1.318.1.1.26.9.2.4.1.2</getRowOid>
						<space/>-<space/>
					</op>
					<op/>
				</if>
				<getRowOid>.1.3.6.1.4.1.318.1.1.26.9.2.4.1.3</getRowOid>
				<space/>
			</label>
			<cntrl_enum>outletControlMap</cntrl_enum>
			<val_enum>rpdu_outlet_states</val_enum>
		</stateControl>
		<enumMap ruleid="outletControlMap">
			<label>Immediate On</label>
			<label>Immediate Off</label>
			<label>Immediate Reboot</label>
			<label>Delayed On</label>
			<label>Delayed Off</label>
			<label>Delayed Reboot</label>
			<label>Cancel Pending Command</label>
		</enumMap>
		<valueMap ruleid="outletControlToState">
			<valueIn>0</valueIn>
			<valueOut>1</valueOut>
			<valueIn>1</valueIn>
			<valueOut>2</valueOut>
			<valueIn>2</valueIn>
			<valueOut>3</valueOut>
			<valueIn>3</valueIn>
			<valueOut>5</valueOut>
			<valueIn>4</valueIn>
			<valueOut>6</valueOut>
			<valueIn>5</valueIn>
			<valueOut>7</valueOut>
			<valueIn>6</valueIn>
			<valueOut>8</valueOut>
		</valueMap>
	</device>
	<device deviceid="rpdu2_metered_outlets">
		<oidMustMatch ruleid="sysobjid" oid=".1.3.6.1.2.1.1.2.0">
			<valueList>
				<value>.1.3.6.1.4.1.318.1.3.4.6</value>
				<!-- rPDU gen2 -->
				<value>.1.3.6.1.4.1.318.1.3.4.6.*</value>
				<!-- other rPDU gen2 -->
				<value>.1.3.6.1.4.1.318.1.3.4.7</value>
				<!-- rPDU gen2 -->
				<value>.1.3.6.1.4.1.318.1.3.4.7.*</value>
				<!-- other rPDU gen2 -->
				<value>.1.3.6.1.4.1.318.1.3.4.8</value>
				<!-- rPDU B -->
				<value>.1.3.6.1.4.1.318.1.3.4.8.*</value>
				<!-- other rPDU B -->
			</valueList>
		</oidMustMatch>
		<oidMustExist ruleid="rpdu2_metered_outlet_oid" oid=".1.3.6.1.4.1.318.1.1.26.9.3.0"/>
		<oidMustNotMatch ruleid="rpdu2_metered_outlet_count" oid=".1.3.6.1.4.1.318.1.1.26.9.3.0">
			<valueList>
				<value>0</value>
			</valueList>
		</oidMustNotMatch>
		<!-- rpdu metered outlet power (provided in tenths of kW) -->
		<numSensor ruleid="rpdu2_outlet_power" index=".1.3.6.1.4.1.318.1.1.26.9.4.3.1.1">
			<type>powerW</type>
			<sensorId>RPDU_OUTLET_POWER_<rowIndex/>
			</sensorId>
			<value>
				<getRowOid>.1.3.6.1.4.1.318.1.1.26.9.4.3.1.7</getRowOid>
			</value>
			<minValue>0.0</minValue>
			<label>
				<if>
					<op>
						<neq>
							<op>
								<getOid>.1.3.6.1.4.1.318.1.1.26.3.0</getOid>
							</op>
							<op>1</op>
						</neq>
					</op>
					<op>Device <getRowOid>.1.3.6.1.4.1.318.1.1.26.9.4.3.1.2</getRowOid>
						<space/>-<space/>
					</op>
					<op/>
				</if>
				Power, <getRowOid>.1.3.6.1.4.1.318.1.1.26.9.4.3.1.3</getRowOid>
			</label>
			<sensorSet>Outlet Metering</sensorSet>
		</numSensor>
		<numSensor ruleid="rpdu2_outlet_peak_power" index=".1.3.6.1.4.1.318.1.1.26.9.4.3.1.1">
			<type>powerW</type>
			<sensorId>RPDU_OUTLET_PEAK_POWER_<rowIndex/>
			</sensorId>
			<value>
				<getRowOid>.1.3.6.1.4.1.318.1.1.26.9.4.3.1.8</getRowOid>
			</value>
			<minValue>0.0</minValue>
			<label>
				<if>
					<op>
						<neq>
							<op>
								<getOid>.1.3.6.1.4.1.318.1.1.26.3.0</getOid>
							</op>
							<op>1</op>
						</neq>
					</op>
					<op>Device <getRowOid>.1.3.6.1.4.1.318.1.1.26.9.4.3.1.2</getRowOid>
						<space/>-<space/>
					</op>
					<op/>
				</if>
				Peak Power, <getRowOid>.1.3.6.1.4.1.318.1.1.26.9.4.3.1.3</getRowOid>
			</label>
			<sensorSet>Outlet Metering</sensorSet>
		</numSensor>
		<numSensor ruleid="rpdu2_outlet_energy" index=".1.3.6.1.4.1.318.1.1.26.9.4.3.1.1">
			<type>num/kwatthr</type>
			<sensorId>RPDU_OUTLET_ENERGY_<rowIndex/>
			</sensorId>
			<value>
				<mult>
					<op>0.1</op>
					<op>
						<getRowOid>.1.3.6.1.4.1.318.1.1.26.9.4.3.1.11</getRowOid>
					</op>
				</mult>
			</value>
			<label>
				<if>
					<op>
						<neq>
							<op>
								<getOid>.1.3.6.1.4.1.318.1.1.26.3.0</getOid>
							</op>
							<op>1</op>
						</neq>
					</op>
					<op>Device <getRowOid>.1.3.6.1.4.1.318.1.1.26.9.4.3.1.2</getRowOid>
						<space/>-<space/>
					</op>
					<op/>
				</if>
				Energy Used, <getRowOid>.1.3.6.1.4.1.318.1.1.26.9.4.3.1.3</getRowOid>
			</label>
			<sensorSet>Outlet Metering</sensorSet>
		</numSensor>
		<numSensor ruleid="rpdu2_outlet_current" index=".1.3.6.1.4.1.318.1.1.26.9.4.3.1.1">
			<type>amperage</type>
			<sensorId>RPDU_OUTLET_CURRENT_<rowIndex/>
			</sensorId>
			<value>
				<mult>
					<op>0.1</op>
					<op>
						<getRowOid>.1.3.6.1.4.1.318.1.1.26.9.4.3.1.6</getRowOid>
					</op>
				</mult>
			</value>
			<label>
				<if>
					<op>
						<neq>
							<op>
								<getOid>.1.3.6.1.4.1.318.1.1.26.3.0</getOid>
							</op>
							<op>1</op>
						</neq>
					</op>
					<op>Device <getRowOid>.1.3.6.1.4.1.318.1.1.26.9.4.3.1.2</getRowOid>
						<space/>-<space/>
					</op>
					<op/>
				</if>
				Current, <getRowOid>.1.3.6.1.4.1.318.1.1.26.9.4.3.1.3</getRowOid>
			</label>
			<sensorSet>Outlet Metering</sensorSet>
		</numSensor>
	</device>

	<device deviceid="rpdu2_env_sensors">
		<oidMustMatch ruleid="sysobjid" oid=".1.3.6.1.2.1.1.2.0">
			<valueList>
				<value>.1.3.6.1.4.1.318.1.3.4.6</value>
				<!-- rPDU gen2 -->
				<value>.1.3.6.1.4.1.318.1.3.4.6.*</value>
				<!-- other rPDU gen2 -->
				<value>.1.3.6.1.4.1.318.1.3.4.7</value>
				<!-- sPDU gen2 -->
				<value>.1.3.6.1.4.1.318.1.3.4.7.*</value>
				<!-- other sPDU -->
				<value>.1.3.6.1.4.1.318.1.3.4.8</value>
				<!-- rPDU B -->
				<value>.1.3.6.1.4.1.318.1.3.4.8.*</value>
				<!-- other rPDU B -->
			</valueList>
		</oidMustMatch>
		<oidMustExist ruleid="rpdu2_sensor_tablesize_oid" oid=".1.3.6.1.4.1.318.1.1.26.10.1.0"/>
		<oidMustNotMatch ruleid="rpdu2_sensor_count" oid=".1.3.6.1.4.1.318.1.1.26.10.1.0">
			<valueList>
				<value>0</value>
			</valueList>
		</oidMustNotMatch>
		<numSensor ruleid="rpdu2_temp_sensor" index=".1.3.6.1.4.1.318.1.1.26.10.2.2.1.1">
			<rowTest>
				<mapValue mapid="delete_null_sensor">
					<getRowOid>.1.3.6.1.4.1.318.1.1.26.10.2.2.1.7</getRowOid>
				</mapValue>
			</rowTest>
			<type>temp</type>
			<sensorId>RPDU_TEMP_<rowIndex/>
			</sensorId>
			<value>
				<mult>
					<op>0.1</op>
					<op>
						<getRowOid>.1.3.6.1.4.1.318.1.1.26.10.2.2.1.8</getRowOid>
					</op>
				</mult>
			</value>
			<label>
				<if>
					<op>
						<eqString>
							<op><getRowOid>.1.3.6.1.4.1.318.1.1.26.10.2.2.1.3</getRowOid></op>
							<op>SensorName</op>
						</eqString>
					</op>
					<op>Device <getRowOid>1.3.6.1.4.1.318.1.1.26.10.2.1.1.2</getRowOid> Temperature</op>
					<op><getRowOid>.1.3.6.1.4.1.318.1.1.26.10.2.2.1.3</getRowOid> Temperature</op>
				</if>
			</label>
			<sensorSet>Environmental Status</sensorSet>
		</numSensor>
		<numSensor ruleid="rpdu2_humidity_sensor" index=".1.3.6.1.4.1.318.1.1.26.10.2.2.1.1">
			<rowTest>
				<mapValue mapid="delete_null_sensor">
					<getRowOid>.1.3.6.1.4.1.318.1.1.26.10.2.2.1.10</getRowOid>
				</mapValue>
			</rowTest>
			<type>humidity</type>
			<sensorId>RPDU_HUMIDITY_<rowIndex/>
			</sensorId>
			<value>
				<getRowOid>.1.3.6.1.4.1.318.1.1.26.10.2.2.1.10</getRowOid>
			</value>
			<label>
				<if>
					<op>
						<eqString>
							<op><getRowOid>.1.3.6.1.4.1.318.1.1.26.10.2.2.1.3</getRowOid></op>
							<op>SensorName</op>
						</eqString>
					</op>
					<op>Device <getRowOid>1.3.6.1.4.1.318.1.1.26.10.2.1.1.2</getRowOid> Humidity</op>
					<op><getRowOid>.1.3.6.1.4.1.318.1.1.26.10.2.2.1.3</getRowOid> Humidity</op>
				</if>
			</label>
			<sensorSet>Environmental Status</sensorSet>
		</numSensor>
		<valueMap ruleid="delete_null_sensor">
			<!-- omit sensors returning -1 -->
			<valueIn>-1</valueIn>
			<valueOut>[false]</valueOut>
			<!-- include the rest -->
			<valueIn>*</valueIn>
			<valueOut>[true]</valueOut>
		</valueMap>
	</device>
	<device deviceid="rpdu2_discrete_inputs">
		<oidMustMatch ruleid="sysobjid" oid=".1.3.6.1.2.1.1.2.0">
			<valueList>
				<value>.1.3.6.1.4.1.318.1.3.4.6</value>
				<!-- rPDU gen2 -->
				<value>.1.3.6.1.4.1.318.1.3.4.6.*</value>
				<!-- other rPDU gen2 -->
				<value>.1.3.6.1.4.1.318.1.3.4.7</value>
				<!-- sPDU gen2 -->
				<value>.1.3.6.1.4.1.318.1.3.4.7.*</value>
				<!-- other sPDU -->
				<value>.1.3.6.1.4.1.318.1.3.4.8</value>
				<!-- rPDU B -->
				<value>.1.3.6.1.4.1.318.1.3.4.8.*</value>
				<!-- other rPDU B -->
			</valueList>
		</oidMustMatch>
		<oidMustExist ruleid="rpdu2_discrete_input_tablesize_oid" oid=".1.3.6.1.4.1.318.1.1.26.10.3.0"/>
		<oidMustNotMatch ruleid="rpdu2_discrete_input_count" oid=".1.3.6.1.4.1.318.1.1.26.10.3.0">
			<valueList>
				<value>0</value>
			</valueList>
		</oidMustNotMatch>
		<stateSensor ruleid="rpdu2_discrete_input_state" index=".1.3.6.1.4.1.318.1.1.26.10.4.2.1.1">
			<rowTest>
				<mapValue mapid="rpdu_discrete_comms_test">
					<getRowOid>.1.3.6.1.4.1.318.1.1.26.10.4.2.1.6</getRowOid>
				</mapValue>
			</rowTest>
			<type>state/discrete_input_state</type>
			<sensorId>RPDU_INPUT_STATE_<rowIndex/>
			</sensorId>
			<value>
				<mapValue mapid="rpdu_discrete_input_state_map">
					<getRowOid>.1.3.6.1.4.1.318.1.1.26.10.4.2.1.7</getRowOid>
				</mapValue>
			</value>
			<label>
				<mapValue mapid="rdpu_discrete_input_types">
					<getRowOid>.1.3.6.1.4.1.318.1.1.26.10.4.2.1.5</getRowOid>
				</mapValue>
				<space/>State -<space/>
				<getRowOid>.1.3.6.1.4.1.318.1.1.26.10.4.2.1.3</getRowOid>
			</label>
			<enum>rpdu_discrete_input_states</enum>
			<sensorSet>Sensor Input Status</sensorSet>
		</stateSensor>
		<enumMap ruleid="rpdu_discrete_input_states">
			<label>On</label>
			<label>Off</label>
			<label>Unknown</label>
		</enumMap>
		<valueMap ruleid="rpdu_discrete_input_state_map">
			<valueIn>1</valueIn>
			<valueOut>0</valueOut>
			<valueIn>2</valueIn>
			<valueOut>1</valueOut>
			<valueIn>3</valueIn>
			<valueOut>2</valueOut>
			<valueIn>*</valueIn>
			<valueOut>2</valueOut>
		</valueMap>
		<valueMap ruleid="rdpu_discrete_input_types">
			<valueIn>1</valueIn>
			<valueOut>Not Connected</valueOut>
			<valueIn>2</valueIn>
			<valueOut>Door Contact Sensor</valueOut>
			<valueIn>3</valueIn>
			<valueOut>Smoke Sensor</valueOut>
			<valueIn>4</valueIn>
			<valueOut>Motion Detector</valueOut>
			<valueIn>5</valueIn>
			<valueOut>Vibration Sensor</valueOut>
			<valueIn>6</valueIn>
			<valueOut>Dry Contact Sensor</valueOut>
			<valueIn>7</valueIn>
			<valueOut>Spot Leak Sensor</valueOut>
			<valueIn>*</valueIn>
			<valueOut>Unknown</valueOut>
		</valueMap>
		<valueMap ruleid="rpdu_discrete_comms_test">
			<valueIn>1</valueIn>
			<valueOut>[false]</valueOut>
			<valueIn>*</valueIn>
			<valueOut>[true]</valueOut>
		</valueMap>
	</device>
</APC_DDF>
