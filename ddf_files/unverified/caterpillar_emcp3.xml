<?xml version="1.0" encoding="UTF-8"?>
<APC_DDF xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://localhost/ddf_schema/apc_ddf_1_6.xsd" ddfid="caterpillar_emcp3" ddfname="Caterpillar EMCP3" ddfversion="2" canremove="yes">
  <schemaVersion>1.6</schemaVersion>
  <device deviceid="caterpillar_emcp3">
    <oidMustExist ruleid="snmpdevicetest" istree="yes" oid=".1.3.6.1.4.1.3815.1.2.2.1.1" />
    <setProductData ruleid="vendordata" field="vendor">Caterpillar</setProductData>
    <setProductData ruleid="modeldata" field="model">EMCP3</setProductData>
    <setProductData ruleid="typedata" field="type">Generator</setProductData>
    <numSensor ruleid="frequency_within_limits">
      <type>num</type>
      <units />
      <sensorId>_FREQUENCY_WITHIN_LIMITS</sensorId>
      <value>
        <mult>
          <op>
            <getOid>1.3.6.1.4.1.3815.1.2.2.1.1.1.1.1.2.1</getOid>
          </op>
          <op>1</op>
        </mult>
      </value>
      <valueInc>1</valueInc>
      <label>Frequency within Limits</label>
      <sensorSet>Generic</sensorSet>
    </numSensor>
    <numSensor ruleid="voltage_within_limits">
      <type>num</type>
      <units />
      <sensorId>_VOLTAGE_WITHIN_LIMITS</sensorId>
      <value>
        <mult>
          <op>
            <getOid>1.3.6.1.4.1.3815.1.2.2.1.1.1.1.1.2.2</getOid>
          </op>
          <op>1</op>
        </mult>
      </value>
      <valueInc>1</valueInc>
      <label>Voltage Within Limits</label>
      <sensorSet>Generic</sensorSet>
    </numSensor>
    <numSensor ruleid="total_apparent_power">
      <type>pctofcapacity</type>
      <units />
      <sensorId>_TOTAL_APPARENT_POWER</sensorId>
      <value>
        <mult>
          <op>
            <getOid>1.3.6.1.4.1.3815.1.2.2.1.1.1.1.1.2.3</getOid>
          </op>
          <op>1</op>
        </mult>
      </value>
      <valueInc>1</valueInc>
      <label>Total Apparent Power</label>
      <sensorSet>Generic</sensorSet>
    </numSensor>
    <numSensor ruleid="total_percent_kva">
      <type>pctofcapacity</type>
      <units />
      <sensorId>_TOTAL_PERCENT_KVA</sensorId>
      <value>
        <mult>
          <op>
            <getOid>1.3.6.1.4.1.3815.1.2.2.1.1.1.1.1.2.4</getOid>
          </op>
          <op>0.0078125</op>
        </mult>
      </value>
      <valueInc>0.001</valueInc>
      <label>Total % KVA</label>
      <sensorSet>Generic</sensorSet>
    </numSensor>
    <numSensor ruleid="average_ac_current_rms">
      <type>amperage</type>
      <units />
      <sensorId>_AVERAGE_AC_CURRENT_RMS</sensorId>
      <value>
        <mult>
          <op>
            <getOid>1.3.6.1.4.1.3815.1.2.2.1.1.1.1.1.2.5</getOid>
          </op>
          <op>1</op>
        </mult>
      </value>
      <valueInc>1</valueInc>
      <label>Average AC Current RMS</label>
      <sensorSet>Ampere</sensorSet>
    </numSensor>
    <numSensor ruleid="average_ac_frequency_rms">
      <type>frequency</type>
      <units />
      <sensorId>_AVERAGE_AC_FREQUENCY_RMS</sensorId>
      <value>
        <mult>
          <op>
            <getOid>1.3.6.1.4.1.3815.1.2.2.1.1.1.1.1.2.6</getOid>
          </op>
          <op>0.0078125</op>
        </mult>
      </value>
      <valueInc>0.001</valueInc>
      <label>Average AC Frequency RMS</label>
      <sensorSet>Frequency</sensorSet>
    </numSensor>
    <numSensor ruleid="overall_power_factor">
      <type>num/powerfactor</type>
      <units />
      <sensorId>_OVERALL_POWER_FACTOR</sensorId>
      <value>
        <mult>
          <op>
            <getOid>1.3.6.1.4.1.3815.1.2.2.1.1.1.1.1.2.7</getOid>
          </op>
          <op>0.00006103515625</op>
        </mult>
      </value>
      <valueInc>1</valueInc>
      <label>Overall Power Factor</label>
      <sensorSet>Power Factor</sensorSet>
    </numSensor>
    <numSensor ruleid="engine_oil_pressure">
      <type>pressure</type>
      <units />
      <sensorId>_ENGINE_OIL_PRESSURE</sensorId>
      <value>
        <mult>
          <op>
            <getOid>1.3.6.1.4.1.3815.1.2.2.1.1.1.1.1.2.8</getOid>
          </op>
          <op>0.125</op>
        </mult>
      </value>
      <valueInc>0.001</valueInc>
      <label>Engine Oil Pressure</label>
      <sensorSet>Pressure</sensorSet>
    </numSensor>
    <numSensor ruleid="engine_coolant_temp">
      <type>temp</type>
      <units />
      <sensorId>_ENGINE_COOLANT_TEMP</sensorId>
      <value>
        <mult>
          <op>
            <getOid>1.3.6.1.4.1.3815.1.2.2.1.1.1.1.1.2.9</getOid>
          </op>
          <op>3.125E-2</op>
        </mult>
      </value>
      <valueInc>3.125E-2</valueInc>
      <label>Engine Coolant Temp</label>
      <sensorSet>Temperature</sensorSet>
    </numSensor>
    <numSensor ruleid="rpm">
      <type>fanspeed</type>
      <units />
      <sensorId>_RPM</sensorId>
      <value>
        <mult>
          <op>
            <getOid>1.3.6.1.4.1.3815.1.2.2.1.1.1.1.1.2.10</getOid>
          </op>
          <op>0.125</op>
        </mult>
      </value>
      <valueInc>0.001</valueInc>
      <label>RPM</label>
      <sensorSet>RPM</sensorSet>
    </numSensor>
    <stateSensor ruleid="operating_mode">
      <type>state</type>
      <sensorId>_OPERATING_MODE</sensorId>
      <value>
        <mapValue mapid="status1_vm">
          <getOid>1.3.6.1.4.1.3815.1.2.2.1.1.1.1.1.2.11</getOid>
        </mapValue>
      </value>
      <label>Operating Mode</label>
      <enum>status1_em</enum>
      <sensorSet>Generic</sensorSet>
    </stateSensor>
    <numSensor ruleid="operating_hours">
      <type>timeinhrs</type>
      <units />
      <sensorId>_OPERATING_HOURS</sensorId>
      <value>
        <mult>
          <op>
            <getOid>1.3.6.1.4.1.3815.1.2.2.1.1.1.1.1.2.12</getOid>
          </op>
          <op>0.05</op>
        </mult>
      </value>
      <valueInc>0.01</valueInc>
      <label>Operating Hours</label>
      <sensorSet>Time</sensorSet>
    </numSensor>
    <stateSensor ruleid="engine_status">
      <type>state</type>
      <sensorId>_ENGINE_STATUS</sensorId>
      <value>
        <mapValue mapid="status2_vm">
          <getOid>1.3.6.1.4.1.3815.1.2.2.1.1.1.1.1.2.13</getOid>
        </mapValue>
      </value>
      <label>Engine Status</label>
      <enum>status2_em</enum>
      <sensorSet>Generic</sensorSet>
    </stateSensor>
    <stateSensor ruleid="auto_startstop_state">
      <type>state</type>
      <sensorId>_AUTO_STARTSTOP_STATE</sensorId>
      <value>
        <mapValue mapid="status3_vm">
          <getOid>1.3.6.1.4.1.3815.1.2.2.1.1.1.1.1.2.14</getOid>
        </mapValue>
      </value>
      <label>Auto StartStop State</label>
      <enum>status3_em</enum>
      <sensorSet>Generic</sensorSet>
    </stateSensor>
    <numSensor ruleid="number_crank_attempts">
      <type>num</type>
      <units />
      <sensorId>_NUMBER_CRANK_ATTEMPTS</sensorId>
      <value>
        <mult>
          <op>
            <getOid>1.3.6.1.4.1.3815.1.2.2.1.1.1.1.1.2.15</getOid>
          </op>
          <op>1</op>
        </mult>
      </value>
      <valueInc>1</valueInc>
      <label>Number Crank Attempts</label>
      <sensorSet>Generic</sensorSet>
    </numSensor>
    <numSensor ruleid="number_successful_starts">
      <type>num</type>
      <units />
      <sensorId>_NUMBER_SUCCESSFUL_STARTS</sensorId>
      <value>
        <mult>
          <op>
            <getOid>1.3.6.1.4.1.3815.1.2.2.1.1.1.1.1.2.16</getOid>
          </op>
          <op>1</op>
        </mult>
      </value>
      <valueInc>1</valueInc>
      <label>Number Successful Starts</label>
      <sensorSet>Generic</sensorSet>
    </numSensor>
	<valueMap ruleid="status1_vm">
<valueIn>0</valueIn>
			<valueOut>0</valueOut>
<valueIn>1</valueIn>
			<valueOut>1</valueOut>
<valueIn>2</valueIn>
			<valueOut>2</valueOut>
<valueIn>*</valueIn>
		<valueOut>0</valueOut>
</valueMap>

<enumMap ruleid="status1_em">
<label>STOP</label>
<label>AUTO</label>
<label>RUN</label>
</enumMap>

<valueMap ruleid="status2_vm">
<valueIn>0</valueIn>
			<valueOut>0</valueOut>
<valueIn>1</valueIn>
			<valueOut>1</valueOut>
<valueIn>2</valueIn>
			<valueOut>2</valueOut>
<valueIn>3</valueIn>
			<valueOut>3</valueOut>
<valueIn>4</valueIn>
			<valueOut>4</valueOut>
<valueIn>5</valueIn>
			<valueOut>5</valueOut>
<valueIn>*</valueIn>
		<valueOut>0</valueOut>
</valueMap>

<enumMap ruleid="status2_em">
<label>NOT READY TO GO</label>
<label>GOING IN AUTO</label>
<label>GOING IN RUN</label>
<label>READY IN AUTO</label>
<label>STOPPING IN AUTO</label>
<label>STOPPING NOT READY TO GO</label>
</enumMap>

<valueMap ruleid="status3_vm">
<valueIn>0</valueIn>
			<valueOut>0</valueOut>
<valueIn>1</valueIn>
			<valueOut>1</valueOut>
<valueIn>2</valueIn>
			<valueOut>2</valueOut>
<valueIn>3</valueIn>
			<valueOut>3</valueOut>
<valueIn>4</valueIn>
			<valueOut>4</valueOut>
<valueIn>5</valueIn>
			<valueOut>5</valueOut>
<valueIn>6</valueIn>
			<valueOut>6</valueOut>
<valueIn>7</valueIn>
			<valueOut>7</valueOut>
<valueIn>8</valueIn>
			<valueOut>8</valueOut>
<valueIn>*</valueIn>
		<valueOut>0</valueOut>
</valueMap>

<enumMap ruleid="status3_em">
<label>INIT</label>
<label>PRE_CRANK</label>
<label>STARTING</label>
<label>RUNNING</label>
<label>PRE_COOLDOWN</label>
<label>COOLDOWN</label>
<label>STOPPING</label>
<label>STOPPED</label>
<label>IDLING</label>
</enumMap>
  </device>
</APC_DDF>
